(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21291,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function l(){let[e,l]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[n,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(null),[c,x]=(0,a.useState)("treatment"),[h,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(null),[g,f]=(0,a.useState)(""),[y,j]=(0,a.useState)("en"),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{fetch("/api/rag/inquiries").then(e=>e.json()).then(e=>i(e?.rows||[])).catch(()=>i([]))},[]);let N=async()=>{d(null);let t={};e.trim()&&(t.text=e.trim()),s&&(t.inquiry_id=Number(s));let a=await fetch("/api/inquiry/normalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});d(await a.json())},w=async()=>{m(null);let e={sourceTypes:[c]};h.trim()&&(e.source_id=h.trim());let t=await fetch("/api/rag/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});m(await t.json())},S=async()=>{v(null);let e=await fetch("/api/rag/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:g.trim(),lang:y})});v(await e.json())};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,t.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 fixed h-full p-6 flex flex-col z-20",children:[(0,t.jsx)("div",{className:"text-2xl font-black text-teal-600 mb-10 flex items-center gap-2",children:"관리자 모드"}),(0,t.jsxs)("nav",{className:"space-y-2 flex-1",children:[(0,t.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시장 분석 (통계)"}),(0,t.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"고객 문의"}),(0,t.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"병원 관리"}),(0,t.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시술 관리"}),(0,t.jsxs)("div",{className:"pt-4 mt-4 border-t border-gray-100 space-y-2",children:[(0,t.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"사이트 설정"}),(0,t.jsx)("div",{className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 bg-teal-50 text-teal-700",children:"RAG 테스트"})]})]}),(0,t.jsx)("a",{href:"/",className:"flex items-center gap-2 text-gray-400 hover:text-red-500 font-bold px-2 py-2",children:"관리자 나가기"})]}),(0,t.jsxs)("div",{className:"ml-64 flex-1 p-8 md:p-12 max-w-5xl space-y-10 text-sm text-gray-800",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"RAG 테스트"}),(0,t.jsx)("p",{className:"text-gray-500",children:"정규화/수집/검색용 최소 도구"})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"A) 문의 정규화 테스트"}),(0,t.jsx)("textarea",{className:"w-full border rounded p-2",rows:4,placeholder:"문의 내용을 붙여넣기...",value:e,onChange:e=>l(e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("select",{className:"border rounded p-2",value:s,onChange:e=>r(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"문의 폼 레코드 선택"}),n.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.id," ",e.email?`- ${e.email}`:""]},e.id))]}),(0,t.jsx)("button",{className:"border px-3 py-2",onClick:N,children:"정규화 실행"})]}),(0,t.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:o?JSON.stringify(o,null,2):"—"})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"B) 수집(ingest) 테스트"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("select",{className:"border rounded p-2",value:c,onChange:e=>x(e.target.value),children:[(0,t.jsx)("option",{value:"treatment",children:"시술 (treatment)"}),(0,t.jsx)("option",{value:"hospital",children:"병원 (hospital)"}),(0,t.jsx)("option",{value:"review",children:"리뷰 (review)"}),(0,t.jsx)("option",{value:"normalized_inquiry",children:"정규화 문의 (normalized_inquiry)"})]}),(0,t.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"source_id (선택)",value:h,onChange:e=>u(e.target.value)}),(0,t.jsx)("button",{className:"border px-3 py-2",onClick:w,children:"수집 실행"})]}),(0,t.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:p?JSON.stringify(p,null,2):"—"})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"C) 검색 테스트"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"검색어...",value:g,onChange:e=>f(e.target.value)}),(0,t.jsxs)("select",{className:"border rounded p-2",value:y,onChange:e=>j(e.target.value),children:[(0,t.jsx)("option",{value:"en",children:"en"}),(0,t.jsx)("option",{value:"ko",children:"ko"}),(0,t.jsx)("option",{value:"ja",children:"ja"})]}),(0,t.jsx)("button",{className:"border px-3 py-2",onClick:S,children:"검색"})]}),(0,t.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:b?JSON.stringify(b,null,2):"—"})]})]})]})}e.s(["default",()=>l])}]);