module.exports=[84332,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let[a,d]=(0,c.useState)(""),[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)("treatment"),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("en"),[u,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{fetch("/api/rag/inquiries").then(a=>a.json()).then(a=>h(a?.rows||[])).catch(()=>h([]))},[]);let w=async()=>{j(null);let b={};a.trim()&&(b.text=a.trim()),e&&(b.inquiry_id=Number(e));let c=await fetch("/api/inquiry/normalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});j(await c.json())},x=async()=>{p(null);let a={sourceTypes:[k]};m.trim()&&(a.source_id=m.trim());let b=await fetch("/api/rag/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});p(await b.json())},y=async()=>{v(null);let a=await fetch("/api/rag/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:q.trim(),lang:s})});v(await a.json())};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,b.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 fixed h-full p-6 flex flex-col z-20",children:[(0,b.jsx)("div",{className:"text-2xl font-black text-teal-600 mb-10 flex items-center gap-2",children:"관리자 모드"}),(0,b.jsxs)("nav",{className:"space-y-2 flex-1",children:[(0,b.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시장 분석 (통계)"}),(0,b.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"고객 문의"}),(0,b.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"병원 관리"}),(0,b.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시술 관리"}),(0,b.jsxs)("div",{className:"pt-4 mt-4 border-t border-gray-100 space-y-2",children:[(0,b.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"사이트 설정"}),(0,b.jsx)("div",{className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 bg-teal-50 text-teal-700",children:"RAG 테스트"})]})]}),(0,b.jsx)("a",{href:"/",className:"flex items-center gap-2 text-gray-400 hover:text-red-500 font-bold px-2 py-2",children:"관리자 나가기"})]}),(0,b.jsxs)("div",{className:"ml-64 flex-1 p-8 md:p-12 max-w-5xl space-y-10 text-sm text-gray-800",children:[(0,b.jsxs)("section",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"RAG 테스트"}),(0,b.jsx)("p",{className:"text-gray-500",children:"정규화/수집/검색용 최소 도구"})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"A) 문의 정규화 테스트"}),(0,b.jsx)("textarea",{className:"w-full border rounded p-2",rows:4,placeholder:"문의 내용을 붙여넣기...",value:a,onChange:a=>d(a.target.value)}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("select",{className:"border rounded p-2",value:e,onChange:a=>f(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"문의 폼 레코드 선택"}),g.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.id," ",a.email?`- ${a.email}`:""]},a.id))]}),(0,b.jsx)("button",{className:"border px-3 py-2",onClick:w,children:"정규화 실행"})]}),(0,b.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:i?JSON.stringify(i,null,2):"—"})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"B) 수집(ingest) 테스트"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("select",{className:"border rounded p-2",value:k,onChange:a=>l(a.target.value),children:[(0,b.jsx)("option",{value:"treatment",children:"시술 (treatment)"}),(0,b.jsx)("option",{value:"hospital",children:"병원 (hospital)"}),(0,b.jsx)("option",{value:"review",children:"리뷰 (review)"}),(0,b.jsx)("option",{value:"normalized_inquiry",children:"정규화 문의 (normalized_inquiry)"})]}),(0,b.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"source_id (선택)",value:m,onChange:a=>n(a.target.value)}),(0,b.jsx)("button",{className:"border px-3 py-2",onClick:x,children:"수집 실행"})]}),(0,b.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:o?JSON.stringify(o,null,2):"—"})]}),(0,b.jsxs)("section",{className:"space-y-3",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"C) 검색 테스트"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"검색어...",value:q,onChange:a=>r(a.target.value)}),(0,b.jsxs)("select",{className:"border rounded p-2",value:s,onChange:a=>t(a.target.value),children:[(0,b.jsx)("option",{value:"en",children:"en"}),(0,b.jsx)("option",{value:"ko",children:"ko"}),(0,b.jsx)("option",{value:"ja",children:"ja"})]}),(0,b.jsx)("button",{className:"border px-3 py-2",onClick:y,children:"검색"})]}),(0,b.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:u?JSON.stringify(u,null,2):"—"})]})]})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=app_admin_rag_page_tsx_f3530498._.js.map