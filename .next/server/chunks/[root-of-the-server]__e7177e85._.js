module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},96670,e=>{"use strict";var t=e.i(24389);let r="https://xppnvkuahlrdyfvabzur.supabase.co",n=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!r||!n){let e=[];throw n||e.push("SUPABASE_SERVICE_ROLE_KEY"),Error(`Supabase admin env missing: ${e.join(", ")}`)}let i=(0,t.createClient)(r,n,{auth:{persistSession:!1}});e.s(["supabaseAdmin",0,i])},54455,86159,13202,e=>{"use strict";let t=["goal","chief_complaint","body_part","timeline","budget","attachments_present"];function r(e="ai_agent"){return{intake:{goal:null,chief_complaint:null,body_part:null,duration:null,severity:null,budget:null,timeline:null,contraindications:null,medical_history_flag:null,medications_flag:null,allergy_flag:null,previous_procedure_flag:null,attachments_present:null},meta:{pipeline_version:"v1",source_type:e,model:null,prompt_version:null}}}function n(e){let r=[];for(let n of t){let t=e[n];if("attachments_present"===n){null==t&&r.push(n);continue}null!=t&&("string"!=typeof t||String(t).trim())||r.push(n)}return r}function i(e,r){let n=t.length-r.length;return n<=0?0:Math.min(1,Math.round(n/t.length*100)/100)}e.s(["computeExtractionConfidence",()=>i,"computeMissingFields",()=>n,"createEmptyIntake",()=>r],54455);let s=[[/nose|rhinoplasty|nasal/i,"nose"],[/skin|acne|facial|laser|botox|filler/i,"skin"],[/breast|augmentation|implants/i,"breast"],[/hair|transplant|follicle/i,"hair"],[/eye|lasik|eyelid|double eyelid/i,"eye"],[/abdomen|tummy|liposuction|belly/i,"abdomen"],[/chin|jaw/i,"chin"],[/dental|implant|tooth|teeth/i,"dental"]],l=[[/allergy|allergic/i,"allergy"],[/medication|medicine|meds|drug/i,"medication"],[/diabetes|diabetic/i,"diabetes"],[/pregnant|pregnancy/i,"pregnant"]];function o(e){let t=String(e||"").toLowerCase();if(!t)return null;for(let[e,r]of s)if("string"==typeof e?t.includes(e):e.test(t))return r;return null}function a(e){let t=String(e||"").toLowerCase(),r=[],n=!1,i=!1;for(let[e,s]of l)("string"==typeof e?t.includes(e):e.test(t))&&(r.push(s),"allergy"===s&&(n=!0),"medication"===s&&(i=!0));return{contraindications:r,allergy:n,medications:i}}function u(e){let t=String(e||"").toLowerCase();if(/\basap\b|as soon|urgent/i.test(t))return"asap";if(/1-3\s*month|1\s*to\s*3\s*m|within 3\s*m/i.test(t))return"1-3m";if(/3-6\s*month|3\s*to\s*6\s*m/i.test(t))return"3-6m";if(/6\s*month|6m\+|6m\s*plus/i.test(t))return"6m+";let r=t.match(/\b(20\d{2})-(\d{2})-(\d{2})\b/);if(r)return`preferred_date:${r[0]}`;let n=t.match(/\b(\d{1,2})\/(\d{1,2})\/(\d{4})\b/);return n?`preferred_date:${n[3]}-${n[1].padStart(2,"0")}-${n[2].padStart(2,"0")}`:null}function c(e){let t=String(e||"").toLowerCase();if(/\bbudget\b|price|cost|usd|won|\$|₩|krw/i.test(t)){let e=t.match(/(\d[\d,.]*)\s*(k|m|million|thousand)?\s*(usd|won|krw|\$|₩)?/i);return e?e[0].trim().slice(0,50):"mentioned"}return null}function p(e){let t=String(e||"").toLowerCase();return/\b1w\b|1\s*week/i.test(t)?"1w":/\b1m\b|1\s*month/i.test(t)?"1m":/\b3m\b|3\s*month/i.test(t)?"3m":/\b6m\b|6\s*month/i.test(t)?"6m":/\b1y\b|1\s*year|1y\+/i.test(t)?"1y+":null}function m(e){let t=String(e||"").toLowerCase();if(/\bmild\b|minor|slight/i.test(t))return"mild";if(/\bmedium\b|moderate/i.test(t))return"medium";if(/\bsevere\b|serious|bad/i.test(t))return"severe";let r=t.match(/\b([0-9]|10)\s*\/\s*10\b|\b([0-9]|10)-10\b/);return r?r[0].slice(0,20):null}e.s(["bodyPartFromText",()=>o,"contraindicationsAndFlagsFromMessage",()=>a,"extractBudgetFromQuery",()=>c,"extractDurationFromQuery",()=>p,"extractSeverityFromQuery",()=>m,"extractTimelineFromQuery",()=>u],86159);var d=e.i(96670);let y=process.env.SUPABASE_ENCRYPTION_KEY;function b(){if(!y){let e=Error("[security/encryption] SUPABASE_ENCRYPTION_KEY is missing. 암호화 키가 설정되지 않았습니다. 환경변수를 확인하세요. 키 분실/변경 시 기존 데이터 복호화 불가.");throw console.error(e.message),e}if(y.length<32){let e=Error(`[security/encryption] SUPABASE_ENCRYPTION_KEY is too short (${y.length} < 32). 암호화 키는 최소 32자 이상이어야 합니다. 키 분실/변경 시 기존 데이터 복호화 불가.`);throw console.error(e.message),e}}async function h(e){if(b(),!e)return null;try{let{data:t,error:r}=await d.supabaseAdmin.rpc("encrypt_text",{plaintext:String(e),encryption_key:y});if(r)return console.error("[security/encryption] encrypt error:",r),null;return t}catch(e){return console.error("[security/encryption] encrypt exception:",e),null}}async function f(e){if(!e)return null;try{let{data:t,error:r}=await d.supabaseAdmin.rpc("email_hash",{email:String(e)});if(r)return console.error("[security/encryption] hash error:",r),null;return t}catch(e){return console.error("[security/encryption] hash exception:",e),null}}e.s(["assertEncryptionKey",()=>b,"encryptText",()=>h,"hashEmail",()=>f],13202)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e7177e85._.js.map