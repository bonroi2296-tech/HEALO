(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{5146:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var l=t(5155),s=t(2115);function r(){let[e,a]=(0,s.useState)(""),[t,r]=(0,s.useState)(""),[n,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),[c,x]=(0,s.useState)("treatment"),[h,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(null),[f,g]=(0,s.useState)(""),[y,j]=(0,s.useState)("en"),[b,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{fetch("/api/rag/inquiries").then(e=>e.json()).then(e=>i(e?.rows||[])).catch(()=>i([]))},[]);let v=async()=>{d(null);let a={};e.trim()&&(a.text=e.trim()),t&&(a.inquiry_id=Number(t));let l=await fetch("/api/inquiry/normalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});d(await l.json())},w=async()=>{m(null);let e={sourceTypes:[c]};h.trim()&&(e.source_id=h.trim());let a=await fetch("/api/rag/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});m(await a.json())},S=async()=>{N(null);let e=await fetch("/api/rag/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:f.trim(),lang:y})});N(await e.json())};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,l.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 fixed h-full p-6 flex flex-col z-20",children:[(0,l.jsx)("div",{className:"text-2xl font-black text-teal-600 mb-10 flex items-center gap-2",children:"관리자 모드"}),(0,l.jsxs)("nav",{className:"space-y-2 flex-1",children:[(0,l.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시장 분석 (통계)"}),(0,l.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"고객 문의"}),(0,l.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"병원 관리"}),(0,l.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"시술 관리"}),(0,l.jsxs)("div",{className:"pt-4 mt-4 border-t border-gray-100 space-y-2",children:[(0,l.jsx)("a",{href:"/admin",className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 transition text-gray-500 hover:bg-gray-50",children:"사이트 설정"}),(0,l.jsx)("div",{className:"w-full text-left px-4 py-3 rounded-xl font-bold flex items-center gap-3 bg-teal-50 text-teal-700",children:"RAG 테스트"})]})]}),(0,l.jsx)("a",{href:"/",className:"flex items-center gap-2 text-gray-400 hover:text-red-500 font-bold px-2 py-2",children:"관리자 나가기"})]}),(0,l.jsxs)("div",{className:"ml-64 flex-1 p-8 md:p-12 max-w-5xl space-y-10 text-sm text-gray-800",children:[(0,l.jsxs)("section",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"RAG 테스트"}),(0,l.jsx)("p",{className:"text-gray-500",children:"정규화/수집/검색용 최소 도구"})]}),(0,l.jsxs)("section",{className:"space-y-3",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"A) 문의 정규화 테스트"}),(0,l.jsx)("textarea",{className:"w-full border rounded p-2",rows:4,placeholder:"문의 내용을 붙여넣기...",value:e,onChange:e=>a(e.target.value)}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("select",{className:"border rounded p-2",value:t,onChange:e=>r(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"문의 폼 레코드 선택"}),n.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.id," ",e.email?`- ${e.email}`:""]},e.id))]}),(0,l.jsx)("button",{className:"border px-3 py-2",onClick:v,children:"정규화 실행"})]}),(0,l.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:o?JSON.stringify(o,null,2):"—"})]}),(0,l.jsxs)("section",{className:"space-y-3",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"B) 수집(ingest) 테스트"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("select",{className:"border rounded p-2",value:c,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{value:"treatment",children:"시술 (treatment)"}),(0,l.jsx)("option",{value:"hospital",children:"병원 (hospital)"}),(0,l.jsx)("option",{value:"review",children:"리뷰 (review)"}),(0,l.jsx)("option",{value:"normalized_inquiry",children:"정규화 문의 (normalized_inquiry)"})]}),(0,l.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"source_id (선택)",value:h,onChange:e=>u(e.target.value)}),(0,l.jsx)("button",{className:"border px-3 py-2",onClick:w,children:"수집 실행"})]}),(0,l.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:p?JSON.stringify(p,null,2):"—"})]}),(0,l.jsxs)("section",{className:"space-y-3",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"C) 검색 테스트"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("input",{className:"border rounded p-2 flex-1",placeholder:"검색어...",value:f,onChange:e=>g(e.target.value)}),(0,l.jsxs)("select",{className:"border rounded p-2",value:y,onChange:e=>j(e.target.value),children:[(0,l.jsx)("option",{value:"en",children:"en"}),(0,l.jsx)("option",{value:"ko",children:"ko"}),(0,l.jsx)("option",{value:"ja",children:"ja"})]}),(0,l.jsx)("button",{className:"border px-3 py-2",onClick:S,children:"검색"})]}),(0,l.jsx)("pre",{className:"bg-gray-50 border rounded p-3 overflow-auto",children:b?JSON.stringify(b,null,2):"—"})]})]})]})}},5900:(e,a,t)=>{Promise.resolve().then(t.bind(t,5146))}},e=>{e.O(0,[121,358],()=>e(e.s=5900)),_N_E=e.O()}]);