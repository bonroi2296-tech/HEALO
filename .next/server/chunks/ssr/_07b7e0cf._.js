module.exports=[24258,(a,b,c)=>{"use strict";let d="u">typeof Buffer,e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,f=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function g(a,b,c){null==c&&null!==b&&"object"==typeof b&&(c=b,b=void 0),d&&Buffer.isBuffer(a)&&(a=a.toString()),a&&65279===a.charCodeAt(0)&&(a=a.slice(1));let g=JSON.parse(a,b);if(null===g||"object"!=typeof g)return g;let i=c&&c.protoAction||"error",j=c&&c.constructorAction||"error";if("ignore"===i&&"ignore"===j)return g;if("ignore"!==i&&"ignore"!==j){if(!1===e.test(a)&&!1===f.test(a))return g}else if("ignore"!==i&&"ignore"===j){if(!1===e.test(a))return g}else if(!1===f.test(a))return g;return h(g,{protoAction:i,constructorAction:j,safe:c&&c.safe})}function h(a,{protoAction:b="error",constructorAction:c="error",safe:d}={}){let e=[a];for(;e.length;){let a=e;for(let f of(e=[],a)){if("ignore"!==b&&Object.prototype.hasOwnProperty.call(f,"__proto__")){if(!0===d)return null;if("error"===b)throw SyntaxError("Object contains forbidden prototype property");delete f.__proto__}if("ignore"!==c&&Object.prototype.hasOwnProperty.call(f,"constructor")&&Object.prototype.hasOwnProperty.call(f.constructor,"prototype")){if(!0===d)return null;if("error"===c)throw SyntaxError("Object contains forbidden prototype property");delete f.constructor}for(let a in f){let b=f[a];b&&"object"==typeof b&&e.push(b)}}}return a}function i(a,b,c){let d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return g(a,b,c)}finally{Error.stackTraceLimit=d}}b.exports=i,b.exports.default=i,b.exports.parse=i,b.exports.safeParse=function(a,b){let c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return g(a,b,{safe:!0})}catch(a){return null}finally{Error.stackTraceLimit=c}},b.exports.scan=h},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},13350,(a,b,c)=>{b.exports=function(a,b){let c;if("function"!=typeof a)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof a}\`.`);let d=0;return function(...e){clearTimeout(c);let f=Date.now(),g=b-(f-d);g<=0?(d=f,a.apply(this,e)):c=setTimeout(()=>{d=Date.now(),a.apply(this,e)},g)}}},25843,a=>{"use strict";let b,c,d;var e,f,g,h,i,j,k,l,m,n,o,p=a.i(87924),q=a.i(72131),r=a.i(50944),s=a.i(13749),t=a.i(70106);let u=(0,t.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var v=a.i(45222);let w=(0,t.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var x=a.i(32860),y=a.i(92e3);let z=(0,t.default)("headset",[["path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z",key:"12oyoe"}],["path",{d:"M21 16v2a4 4 0 0 1-4 4h-5",key:"1x7m43"}]]);var A=a.i(74618),B=a.i(35487),C=a.i(33508),D=a.i(76992),E=a.i(82484),F=a.i(30900),G=a.i(51088),H=a.i(38709),I=a.i(3219),J="vercel.ai.error",K=Symbol.for(J),L=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[h]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,J)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};h=K;var M=L;function N(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var O="AI_InvalidArgumentError",P=`vercel.ai.error.${O}`,Q=Symbol.for(P),R=class extends M{constructor({message:a,cause:b,argument:c}){super({name:O,message:a,cause:b}),this[i]=!0,this.argument=c}static isInstance(a){return M.hasMarker(a,P)}};i=Q,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var S="AI_JSONParseError",T=`vercel.ai.error.${S}`,U=Symbol.for(T),V=class extends M{constructor({text:a,cause:b}){super({name:S,message:`JSON parsing failed: Text: ${a}.
Error message: ${N(b)}`,cause:b}),this[j]=!0,this.text=a}static isInstance(a){return M.hasMarker(a,T)}};j=U,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var W="AI_TypeValidationError",X=`vercel.ai.error.${W}`,Y=Symbol.for(X),Z=class a extends M{constructor({value:a,cause:b}){super({name:W,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${N(b)}`,cause:b}),this[k]=!0,this.value=a}static isInstance(a){return M.hasMarker(a,X)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};k=Y,Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");var $=a.i(24258),_=(({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=((a,b=21)=>(c=b)=>{let d="",e=0|c;for(;e--;)d+=a[Math.random()*a.length|0];return d})(c,b);if(null==a)return e;if(c.includes(d))throw new R({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return b=>`${a}${d}${e(b)}`})(),aa=Symbol.for("vercel.ai.validator");function ab({text:a,schema:b}){try{let c=$.default.parse(a);if(null==b)return{success:!0,value:c,rawValue:c};let d=function({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&aa in b&&!0===b[aa]&&"validate"in b?b:(c=b,{[aa]:!0,validate:a=>{let b=c.safeParse(a);return b.success?{success:!0,value:b.data}:{success:!1,error:b.error}}});try{if(null==d.validate)return{success:!0,value:a};let b=d.validate(a);if(b.success)return b;return{success:!1,error:Z.wrap({value:a,cause:b.error})}}catch(b){return{success:!1,error:Z.wrap({value:a,cause:b})}}}({value:c,schema:b});return d.success?{...d,rawValue:c}:d}catch(b){return{success:!1,error:V.isInstance(b)?b:new V({text:a,cause:b})}}}var{btoa:ac,atob:ad}=globalThis;let ae=Symbol("Let zodToJsonSchema decide on which parser to use");function af(a,b,c,d){d?.errorMessages&&c&&(a.errorMessage={...a.errorMessage,[b]:c})}function ag(a,b,c,d,e){a[b]=c,af(a,b,d,e)}let ah=(a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")};(e=l||(l={})).assertEqual=a=>{},e.assertIs=function(a){},e.assertNever=function(a){throw Error()},e.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},e.getValidEnumValues=a=>{let b=e.objectKeys(a).filter(b=>"number"!=typeof a[a[b]]),c={};for(let d of b)c[d]=a[d];return e.objectValues(c)},e.objectValues=a=>e.objectKeys(a).map(function(b){return a[b]}),e.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},e.find=(a,b)=>{for(let c of a)if(b(c))return c},e.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,e.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},e.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b,(m||(m={})).mergeShapes=(a,b)=>({...a,...b});let ai=l.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),aj=a=>{switch(typeof a){case"undefined":return ai.undefined;case"string":return ai.string;case"number":return Number.isNaN(a)?ai.nan:ai.number;case"boolean":return ai.boolean;case"function":return ai.function;case"bigint":return ai.bigint;case"symbol":return ai.symbol;case"object":if(Array.isArray(a))return ai.array;if(null===a)return ai.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return ai.promise;if("u">typeof Map&&a instanceof Map)return ai.map;if("u">typeof Set&&a instanceof Set)return ai.set;if("u">typeof Date&&a instanceof Date)return ai.date;return ai.object;default:return ai.unknown}},ak=l.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class al extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof al))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,l.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}al.create=a=>new al(a);let am=(a,b)=>{let c;switch(a.code){case ak.invalid_type:c=a.received===ai.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case ak.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,l.jsonStringifyReplacer)}`;break;case ak.unrecognized_keys:c=`Unrecognized key(s) in object: ${l.joinValues(a.keys,", ")}`;break;case ak.invalid_union:c="Invalid input";break;case ak.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${l.joinValues(a.options)}`;break;case ak.invalid_enum_value:c=`Invalid enum value. Expected ${l.joinValues(a.options)}, received '${a.received}'`;break;case ak.invalid_arguments:c="Invalid function arguments";break;case ak.invalid_return_type:c="Invalid function return type";break;case ak.invalid_date:c="Invalid date";break;case ak.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:l.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case ak.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case ak.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case ak.custom:c="Invalid input";break;case ak.invalid_intersection_types:c="Intersection results could not be merged";break;case ak.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ak.not_finite:c="Number must be finite";break;default:c=b.defaultError,l.assertNever(a)}return{message:c}};(f=n||(n={})).errToObj=a=>"string"==typeof a?{message:a}:a||{},f.toString=a=>"string"==typeof a?a:a?.message;let an=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function ao(a,b){let c=an({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,am,void 0].filter(a=>!!a)});a.common.issues.push(c)}class ap{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return aq;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return ap.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return aq;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let aq=Object.freeze({status:"aborted"}),ar=a=>({status:"dirty",value:a}),as=a=>({status:"valid",value:a}),at=a=>"u">typeof Promise&&a instanceof Promise;class au{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let av=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new al(a.common.issues);return this._error=b,this._error}}};function aw(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class ax{get description(){return this._def.description}_getType(a){return aj(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:aj(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new ap,ctx:{common:a.parent.common,data:a.data,parsedType:aj(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(at(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:aj(a)},d=this._parseSync({data:a,path:c.path,parent:c});return av(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:aj(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:aj(a)},d=this._parse({data:a,path:c.path,parent:c});return av(c,await (at(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:ak.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"u">typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new bg({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return bh.create(this,this._def)}nullable(){return bi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return a_.create(this)}promise(){return bf.create(this,this._def)}or(a){return a1.create([this,a],this._def)}and(a){return a4.create(this,a,this._def)}transform(a){return new bg({...aw(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new bj({...aw(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:o.ZodDefault})}brand(){return new bm({typeName:o.ZodBranded,type:this,...aw(this._def)})}catch(a){return new bk({...aw(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:o.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return bn.create(this,a)}readonly(){return bo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let ay=/^c[^\s-]{8,}$/i,az=/^[0-9a-z]+$/,aA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,aB=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aC=/^[a-z0-9_-]{21}$/i,aD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,aE=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aF=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,aL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,aM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aN=RegExp(`^${aM}$`);function aO(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class aP extends ax{_parse(a){var c,d,e,f;let g;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==ai.string){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.string,received:b.parsedType}),aq}let h=new ap;for(let i of this._def.checks)if("min"===i.kind)a.data.length<i.value&&(ao(g=this._getOrReturnCtx(a,g),{code:ak.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("max"===i.kind)a.data.length>i.value&&(ao(g=this._getOrReturnCtx(a,g),{code:ak.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("length"===i.kind){let b=a.data.length>i.value,c=a.data.length<i.value;(b||c)&&(g=this._getOrReturnCtx(a,g),b?ao(g,{code:ak.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&ao(g,{code:ak.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),h.dirty())}else if("email"===i.kind)aF.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"email",code:ak.invalid_string,message:i.message}),h.dirty());else if("emoji"===i.kind)b||(b=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"emoji",code:ak.invalid_string,message:i.message}),h.dirty());else if("uuid"===i.kind)aB.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"uuid",code:ak.invalid_string,message:i.message}),h.dirty());else if("nanoid"===i.kind)aC.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"nanoid",code:ak.invalid_string,message:i.message}),h.dirty());else if("cuid"===i.kind)ay.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"cuid",code:ak.invalid_string,message:i.message}),h.dirty());else if("cuid2"===i.kind)az.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"cuid2",code:ak.invalid_string,message:i.message}),h.dirty());else if("ulid"===i.kind)aA.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"ulid",code:ak.invalid_string,message:i.message}),h.dirty());else if("url"===i.kind)try{new URL(a.data)}catch{ao(g=this._getOrReturnCtx(a,g),{validation:"url",code:ak.invalid_string,message:i.message}),h.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"regex",code:ak.invalid_string,message:i.message}),h.dirty())):"trim"===i.kind?a.data=a.data.trim():"includes"===i.kind?a.data.includes(i.value,i.position)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),h.dirty()):"toLowerCase"===i.kind?a.data=a.data.toLowerCase():"toUpperCase"===i.kind?a.data=a.data.toUpperCase():"startsWith"===i.kind?a.data.startsWith(i.value)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:{startsWith:i.value},message:i.message}),h.dirty()):"endsWith"===i.kind?a.data.endsWith(i.value)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:{endsWith:i.value},message:i.message}),h.dirty()):"datetime"===i.kind?(function(a){let b=`${aM}T${aO(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(i).test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:"datetime",message:i.message}),h.dirty()):"date"===i.kind?aN.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:"date",message:i.message}),h.dirty()):"time"===i.kind?RegExp(`^${aO(i)}$`).test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{code:ak.invalid_string,validation:"time",message:i.message}),h.dirty()):"duration"===i.kind?aE.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"duration",code:ak.invalid_string,message:i.message}),h.dirty()):"ip"===i.kind?(c=a.data,!(("v4"===(d=i.version)||!d)&&aG.test(c)||("v6"===d||!d)&&aI.test(c))&&1&&(ao(g=this._getOrReturnCtx(a,g),{validation:"ip",code:ak.invalid_string,message:i.message}),h.dirty())):"jwt"===i.kind?!function(a,b){if(!aD.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,i.alg)&&(ao(g=this._getOrReturnCtx(a,g),{validation:"jwt",code:ak.invalid_string,message:i.message}),h.dirty()):"cidr"===i.kind?(e=a.data,!(("v4"===(f=i.version)||!f)&&aH.test(e)||("v6"===f||!f)&&aJ.test(e))&&1&&(ao(g=this._getOrReturnCtx(a,g),{validation:"cidr",code:ak.invalid_string,message:i.message}),h.dirty())):"base64"===i.kind?aK.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"base64",code:ak.invalid_string,message:i.message}),h.dirty()):"base64url"===i.kind?aL.test(a.data)||(ao(g=this._getOrReturnCtx(a,g),{validation:"base64url",code:ak.invalid_string,message:i.message}),h.dirty()):l.assertNever(i);return{status:h.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:ak.invalid_string,...n.errToObj(c)})}_addCheck(a){return new aP({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...n.errToObj(a)})}url(a){return this._addCheck({kind:"url",...n.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...n.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...n.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...n.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...n.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...n.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...n.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...n.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...n.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...n.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...n.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...n.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...n.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...n.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...n.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...n.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...n.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...n.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...n.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...n.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...n.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...n.errToObj(b)})}nonempty(a){return this.min(1,n.errToObj(a))}trim(){return new aP({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new aP({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new aP({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}aP.create=a=>new aP({checks:[],typeName:o.ZodString,coerce:a?.coerce??!1,...aw(a)});class aQ extends ax{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==ai.number){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.number,received:b.parsedType}),aq}let c=new ap;for(let d of this._def.checks)"int"===d.kind?l.isInteger(a.data)||(ao(b=this._getOrReturnCtx(a,b),{code:ak.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(ao(b=this._getOrReturnCtx(a,b),{code:ak.not_finite,message:d.message}),c.dirty()):l.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,n.toString(b))}gt(a,b){return this.setLimit("min",a,!1,n.toString(b))}lte(a,b){return this.setLimit("max",a,!0,n.toString(b))}lt(a,b){return this.setLimit("max",a,!1,n.toString(b))}setLimit(a,b,c,d){return new aQ({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:n.toString(d)}]})}_addCheck(a){return new aQ({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:n.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:n.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:n.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:n.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:n.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:n.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:n.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:n.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:n.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&l.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}aQ.create=a=>new aQ({checks:[],typeName:o.ZodNumber,coerce:a?.coerce||!1,...aw(a)});class aR extends ax{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==ai.bigint)return this._getInvalidInput(a);let c=new ap;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):l.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.bigint,received:b.parsedType}),aq}gte(a,b){return this.setLimit("min",a,!0,n.toString(b))}gt(a,b){return this.setLimit("min",a,!1,n.toString(b))}lte(a,b){return this.setLimit("max",a,!0,n.toString(b))}lt(a,b){return this.setLimit("max",a,!1,n.toString(b))}setLimit(a,b,c,d){return new aR({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:n.toString(d)}]})}_addCheck(a){return new aR({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:n.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:n.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:n.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:n.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:n.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}aR.create=a=>new aR({checks:[],typeName:o.ZodBigInt,coerce:a?.coerce??!1,...aw(a)});class aS extends ax{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==ai.boolean){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.boolean,received:b.parsedType}),aq}return as(a.data)}}aS.create=a=>new aS({typeName:o.ZodBoolean,coerce:a?.coerce||!1,...aw(a)});class aT extends ax{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==ai.date){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.date,received:b.parsedType}),aq}if(Number.isNaN(a.data.getTime()))return ao(this._getOrReturnCtx(a),{code:ak.invalid_date}),aq;let c=new ap;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(ao(b=this._getOrReturnCtx(a,b),{code:ak.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):l.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new aT({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:n.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:n.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}aT.create=a=>new aT({checks:[],coerce:a?.coerce||!1,typeName:o.ZodDate,...aw(a)});class aU extends ax{_parse(a){if(this._getType(a)!==ai.symbol){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.symbol,received:b.parsedType}),aq}return as(a.data)}}aU.create=a=>new aU({typeName:o.ZodSymbol,...aw(a)});class aV extends ax{_parse(a){if(this._getType(a)!==ai.undefined){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.undefined,received:b.parsedType}),aq}return as(a.data)}}aV.create=a=>new aV({typeName:o.ZodUndefined,...aw(a)});class aW extends ax{_parse(a){if(this._getType(a)!==ai.null){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.null,received:b.parsedType}),aq}return as(a.data)}}aW.create=a=>new aW({typeName:o.ZodNull,...aw(a)});class aX extends ax{constructor(){super(...arguments),this._any=!0}_parse(a){return as(a.data)}}aX.create=a=>new aX({typeName:o.ZodAny,...aw(a)});class aY extends ax{constructor(){super(...arguments),this._unknown=!0}_parse(a){return as(a.data)}}aY.create=a=>new aY({typeName:o.ZodUnknown,...aw(a)});class aZ extends ax{_parse(a){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.never,received:b.parsedType}),aq}}aZ.create=a=>new aZ({typeName:o.ZodNever,...aw(a)});class a$ extends ax{_parse(a){if(this._getType(a)!==ai.undefined){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.void,received:b.parsedType}),aq}return as(a.data)}}a$.create=a=>new a$({typeName:o.ZodVoid,...aw(a)});class a_ extends ax{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==ai.array)return ao(b,{code:ak.invalid_type,expected:ai.array,received:b.parsedType}),aq;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(ao(b,{code:a?ak.too_big:ak.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(ao(b,{code:ak.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(ao(b,{code:ak.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new au(b,a,b.path,c)))).then(a=>ap.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new au(b,a,b.path,c)));return ap.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new a_({...this._def,minLength:{value:a,message:n.toString(b)}})}max(a,b){return new a_({...this._def,maxLength:{value:a,message:n.toString(b)}})}length(a,b){return new a_({...this._def,exactLength:{value:a,message:n.toString(b)}})}nonempty(a){return this.min(1,a)}}a_.create=(a,b)=>new a_({type:a,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...aw(b)});class a0 extends ax{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=l.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==ai.object){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.object,received:b.parsedType}),aq}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof aZ&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new au(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof aZ){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(ao(c,{code:ak.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new au(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>ap.mergeObjectSync(b,a)):ap.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return n.errToObj,new a0({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:n.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new a0({...this._def,unknownKeys:"strip"})}passthrough(){return new a0({...this._def,unknownKeys:"passthrough"})}extend(a){return new a0({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new a0({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:o.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new a0({...this._def,catchall:a})}pick(a){let b={};for(let c of l.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new a0({...this._def,shape:()=>b})}omit(a){let b={};for(let c of l.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new a0({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof a0){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=bh.create(a(e))}return new a0({...b._def,shape:()=>c})}if(b instanceof a_)return new a_({...b._def,type:a(b.element)});if(b instanceof bh)return bh.create(a(b.unwrap()));if(b instanceof bi)return bi.create(a(b.unwrap()));if(b instanceof a5)return a5.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of l.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new a0({...this._def,shape:()=>b})}required(a){let b={};for(let c of l.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof bh;)a=a._def.innerType;b[c]=a}return new a0({...this._def,shape:()=>b})}keyof(){return bc(l.objectKeys(this.shape))}}a0.create=(a,b)=>new a0({shape:()=>a,unknownKeys:"strip",catchall:aZ.create(),typeName:o.ZodObject,...aw(b)}),a0.strictCreate=(a,b)=>new a0({shape:()=>a,unknownKeys:"strict",catchall:aZ.create(),typeName:o.ZodObject,...aw(b)}),a0.lazycreate=(a,b)=>new a0({shape:a,unknownKeys:"strip",catchall:aZ.create(),typeName:o.ZodObject,...aw(b)});class a1 extends ax{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new al(a.ctx.common.issues));return ao(b,{code:ak.invalid_union,unionErrors:c}),aq});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new al(a));return ao(b,{code:ak.invalid_union,unionErrors:e}),aq}}get options(){return this._def.options}}a1.create=(a,b)=>new a1({options:a,typeName:o.ZodUnion,...aw(b)});let a2=a=>{if(a instanceof ba)return a2(a.schema);if(a instanceof bg)return a2(a.innerType());if(a instanceof bb)return[a.value];if(a instanceof bd)return a.options;if(a instanceof be)return l.objectValues(a.enum);else if(a instanceof bj)return a2(a._def.innerType);else if(a instanceof aV)return[void 0];else if(a instanceof aW)return[null];else if(a instanceof bh)return[void 0,...a2(a.unwrap())];else if(a instanceof bi)return[null,...a2(a.unwrap())];else if(a instanceof bm)return a2(a.unwrap());else if(a instanceof bo)return a2(a.unwrap());else if(a instanceof bk)return a2(a._def.innerType);else return[]};class a3 extends ax{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==ai.object)return ao(b,{code:ak.invalid_type,expected:ai.object,received:b.parsedType}),aq;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(ao(b,{code:ak.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),aq)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=a2(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new a3({typeName:o.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...aw(c)})}}class a4 extends ax{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return aq;let e=function a(b,c){let d=aj(b),e=aj(c);if(b===c)return{valid:!0,data:b};if(d===ai.object&&e===ai.object){let d=l.objectKeys(c),e=l.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===ai.array&&e===ai.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===ai.date&&e===ai.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(ao(c,{code:ak.invalid_intersection_types}),aq)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}a4.create=(a,b,c)=>new a4({left:a,right:b,typeName:o.ZodIntersection,...aw(c)});class a5 extends ax{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==ai.array)return ao(c,{code:ak.invalid_type,expected:ai.array,received:c.parsedType}),aq;if(c.data.length<this._def.items.length)return ao(c,{code:ak.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),aq;!this._def.rest&&c.data.length>this._def.items.length&&(ao(c,{code:ak.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new au(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>ap.mergeArray(b,a)):ap.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new a5({...this._def,rest:a})}}a5.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new a5({items:a,typeName:o.ZodTuple,rest:null,...aw(b)})};class a6 extends ax{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==ai.object)return ao(c,{code:ak.invalid_type,expected:ai.object,received:c.parsedType}),aq;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new au(c,a,c.path,a)),value:f._parse(new au(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?ap.mergeObjectAsync(b,d):ap.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new a6(b instanceof ax?{keyType:a,valueType:b,typeName:o.ZodRecord,...aw(c)}:{keyType:aP.create(),valueType:a,typeName:o.ZodRecord,...aw(b)})}}class a7 extends ax{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==ai.map)return ao(c,{code:ak.invalid_type,expected:ai.map,received:c.parsedType}),aq;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new au(c,a,c.path,[f,"key"])),value:e._parse(new au(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return aq;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return aq;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}a7.create=(a,b,c)=>new a7({valueType:b,keyType:a,typeName:o.ZodMap,...aw(c)});class a8 extends ax{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==ai.set)return ao(c,{code:ak.invalid_type,expected:ai.set,received:c.parsedType}),aq;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(ao(c,{code:ak.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(ao(c,{code:ak.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return aq;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new au(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new a8({...this._def,minSize:{value:a,message:n.toString(b)}})}max(a,b){return new a8({...this._def,maxSize:{value:a,message:n.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}a8.create=(a,b)=>new a8({valueType:a,minSize:null,maxSize:null,typeName:o.ZodSet,...aw(b)});class a9 extends ax{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==ai.function)return ao(b,{code:ak.invalid_type,expected:ai.function,received:b.parsedType}),aq;function c(a,c){return an({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,am,am].filter(a=>!!a),issueData:{code:ak.invalid_arguments,argumentsError:c}})}function d(a,c){return an({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,am,am].filter(a=>!!a),issueData:{code:ak.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof bf){let a=this;return as(async function(...b){let g=new al([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return as(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new al([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new al([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new a9({...this._def,args:a5.create(a).rest(aY.create())})}returns(a){return new a9({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new a9({args:a||a5.create([]).rest(aY.create()),returns:b||aY.create(),typeName:o.ZodFunction,...aw(c)})}}class ba extends ax{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}ba.create=(a,b)=>new ba({getter:a,typeName:o.ZodLazy,...aw(b)});class bb extends ax{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return ao(b,{received:b.data,code:ak.invalid_literal,expected:this._def.value}),aq}return{status:"valid",value:a.data}}get value(){return this._def.value}}function bc(a,b){return new bd({values:a,typeName:o.ZodEnum,...aw(b)})}bb.create=(a,b)=>new bb({value:a,typeName:o.ZodLiteral,...aw(b)});class bd extends ax{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return ao(b,{expected:l.joinValues(c),received:b.parsedType,code:ak.invalid_type}),aq}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return ao(b,{received:b.data,code:ak.invalid_enum_value,options:c}),aq}return as(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return bd.create(a,{...this._def,...b})}exclude(a,b=this._def){return bd.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}bd.create=bc;class be extends ax{_parse(a){let b=l.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==ai.string&&c.parsedType!==ai.number){let a=l.objectValues(b);return ao(c,{expected:l.joinValues(a),received:c.parsedType,code:ak.invalid_type}),aq}if(this._cache||(this._cache=new Set(l.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=l.objectValues(b);return ao(c,{received:c.data,code:ak.invalid_enum_value,options:a}),aq}return as(a.data)}get enum(){return this._def.values}}be.create=(a,b)=>new be({values:a,typeName:o.ZodNativeEnum,...aw(b)});class bf extends ax{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==ai.promise&&!1===b.common.async?(ao(b,{code:ak.invalid_type,expected:ai.promise,received:b.parsedType}),aq):as((b.parsedType===ai.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}bf.create=(a,b)=>new bf({type:a,typeName:o.ZodPromise,...aw(b)});class bg extends ax{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{ao(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return aq;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?aq:"dirty"===d.status||"dirty"===b.value?ar(d.value):d});{if("aborted"===b.value)return aq;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?aq:"dirty"===d.status||"dirty"===b.value?ar(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?aq:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?aq:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?aq:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return aq;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}l.assertNever(d)}}bg.create=(a,b,c)=>new bg({schema:a,typeName:o.ZodEffects,effect:b,...aw(c)}),bg.createWithPreprocess=(a,b,c)=>new bg({schema:b,effect:{type:"preprocess",transform:a},typeName:o.ZodEffects,...aw(c)});class bh extends ax{_parse(a){return this._getType(a)===ai.undefined?as(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}bh.create=(a,b)=>new bh({innerType:a,typeName:o.ZodOptional,...aw(b)});class bi extends ax{_parse(a){return this._getType(a)===ai.null?as(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}bi.create=(a,b)=>new bi({innerType:a,typeName:o.ZodNullable,...aw(b)});class bj extends ax{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===ai.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}bj.create=(a,b)=>new bj({innerType:a,typeName:o.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...aw(b)});class bk extends ax{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return at(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new al(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new al(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}bk.create=(a,b)=>new bk({innerType:a,typeName:o.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...aw(b)});class bl extends ax{_parse(a){if(this._getType(a)!==ai.nan){let b=this._getOrReturnCtx(a);return ao(b,{code:ak.invalid_type,expected:ai.nan,received:b.parsedType}),aq}return{status:"valid",value:a.data}}}bl.create=a=>new bl({typeName:o.ZodNaN,...aw(a)}),Symbol("zod_brand");class bm extends ax{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class bn extends ax{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?aq:"dirty"===a.status?(b.dirty(),ar(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?aq:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new bn({in:a,out:b,typeName:o.ZodPipeline})}}class bo extends ax{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return at(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}function bp(a){if("openAi"!==a.target)return{};let b=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===a.$refStrategy?ah(b,a.currentPath):b.join("/")}}function bq(a,b){return bL(a.type._def,b)}bo.create=(a,b)=>new bo({innerType:a,typeName:o.ZodReadonly,...aw(b)}),a0.lazycreate,(g=o||(o={})).ZodString="ZodString",g.ZodNumber="ZodNumber",g.ZodNaN="ZodNaN",g.ZodBigInt="ZodBigInt",g.ZodBoolean="ZodBoolean",g.ZodDate="ZodDate",g.ZodSymbol="ZodSymbol",g.ZodUndefined="ZodUndefined",g.ZodNull="ZodNull",g.ZodAny="ZodAny",g.ZodUnknown="ZodUnknown",g.ZodNever="ZodNever",g.ZodVoid="ZodVoid",g.ZodArray="ZodArray",g.ZodObject="ZodObject",g.ZodUnion="ZodUnion",g.ZodDiscriminatedUnion="ZodDiscriminatedUnion",g.ZodIntersection="ZodIntersection",g.ZodTuple="ZodTuple",g.ZodRecord="ZodRecord",g.ZodMap="ZodMap",g.ZodSet="ZodSet",g.ZodFunction="ZodFunction",g.ZodLazy="ZodLazy",g.ZodLiteral="ZodLiteral",g.ZodEnum="ZodEnum",g.ZodEffects="ZodEffects",g.ZodNativeEnum="ZodNativeEnum",g.ZodOptional="ZodOptional",g.ZodNullable="ZodNullable",g.ZodDefault="ZodDefault",g.ZodCatch="ZodCatch",g.ZodPromise="ZodPromise",g.ZodBranded="ZodBranded",g.ZodPipeline="ZodPipeline",g.ZodReadonly="ZodReadonly",aP.create,aQ.create,bl.create,aR.create,aS.create,aT.create,aU.create,aV.create,aW.create,aX.create,aY.create,aZ.create,a$.create,a_.create,a0.create,a0.strictCreate,a1.create,a3.create,a4.create,a5.create,a6.create,a7.create,a8.create,a9.create,ba.create,bb.create,bd.create,be.create,bf.create,bg.create,bh.create,bi.create,bg.createWithPreprocess,bn.create;let br=/^[cC][^\s-]{8,}$/,bs=/^[0-9a-z]+$/,bt=/^[0-9A-HJKMNP-TV-Z]{26}$/,bu=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,bv=()=>(void 0===c&&(c=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),c),bw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,bx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,by=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bA=/^[a-zA-Z0-9_-]{21}$/,bB=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function bC(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":ag(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b);break;case"max":ag(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"email":switch(b.emailStrategy){case"format:email":bF(c,"email",d.message,b);break;case"format:idn-email":bF(c,"idn-email",d.message,b);break;case"pattern:zod":bG(c,bu,d.message,b)}break;case"url":bF(c,"uri",d.message,b);break;case"uuid":bF(c,"uuid",d.message,b);break;case"regex":bG(c,d.regex,d.message,b);break;case"cuid":bG(c,br,d.message,b);break;case"cuid2":bG(c,bs,d.message,b);break;case"startsWith":bG(c,RegExp(`^${bD(d.value,b)}`),d.message,b);break;case"endsWith":bG(c,RegExp(`${bD(d.value,b)}$`),d.message,b);break;case"datetime":bF(c,"date-time",d.message,b);break;case"date":bF(c,"date",d.message,b);break;case"time":bF(c,"time",d.message,b);break;case"duration":bF(c,"duration",d.message,b);break;case"length":ag(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b),ag(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"includes":bG(c,RegExp(bD(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&bF(c,"ipv4",d.message,b),"v4"!==d.version&&bF(c,"ipv6",d.message,b);break;case"base64url":bG(c,bz,d.message,b);break;case"jwt":bG(c,bB,d.message,b);break;case"cidr":"v6"!==d.version&&bG(c,bw,d.message,b),"v4"!==d.version&&bG(c,bx,d.message,b);break;case"emoji":bG(c,bv(),d.message,b);break;case"ulid":bG(c,bt,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":bF(c,"binary",d.message,b);break;case"contentEncoding:base64":ag(c,"contentEncoding","base64",d.message,b);break;case"pattern:zod":bG(c,by,d.message,b)}break;case"nanoid":bG(c,bA,d.message,b)}return c}function bD(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)bE.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}let bE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function bF(a,b,c,d){a.format||a.anyOf?.some(a=>a.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&d.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):ag(a,"format",b,c,d)}function bG(a,b,c,d){a.pattern||a.allOf?.some(a=>a.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&d.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.allOf.push({pattern:bH(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):ag(a,"pattern",bH(b,d),c,d)}function bH(a,b){if(!b.applyRegexFlags||!a.flags)return a.source;let c={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},d=c.i?a.source.toLowerCase():a.source,e="",f=!1,g=!1,h=!1;for(let a=0;a<d.length;a++){if(f){e+=d[a],f=!1;continue}if(c.i){if(g){if(d[a].match(/[a-z]/)){h?(e+=d[a],e+=`${d[a-2]}-${d[a]}`.toUpperCase(),h=!1):"-"===d[a+1]&&d[a+2]?.match(/[a-z]/)?(e+=d[a],h=!0):e+=`${d[a]}${d[a].toUpperCase()}`;continue}}else if(d[a].match(/[a-z]/)){e+=`[${d[a]}${d[a].toUpperCase()}]`;continue}}if(c.m){if("^"===d[a]){e+=`(^|(?<=[\r
]))`;continue}else if("$"===d[a]){e+=`($|(?=[\r
]))`;continue}}if(c.s&&"."===d[a]){e+=g?`${d[a]}\r
`:`[${d[a]}\r
]`;continue}e+=d[a],"\\"===d[a]?f=!0:g&&"]"===d[a]?g=!1:g||"["!==d[a]||(g=!0)}try{new RegExp(e)}catch{return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return e}function bI(a,b){if("openAi"===b.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===b.target&&a.keyType?._def.typeName===o.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((c,d)=>({...c,[d]:bL(a.valueType._def,{...b,currentPath:[...b.currentPath,"properties",d]})??bp(b)}),{}),additionalProperties:b.rejectedAdditionalProperties};let c={type:"object",additionalProperties:bL(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]})??b.allowedAdditionalProperties};if("openApi3"===b.target)return c;if(a.keyType?._def.typeName===o.ZodString&&a.keyType._def.checks?.length){let{type:d,...e}=bC(a.keyType._def,b);return{...c,propertyNames:e}}if(a.keyType?._def.typeName===o.ZodEnum)return{...c,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===o.ZodBranded&&a.keyType._def.type._def.typeName===o.ZodString&&a.keyType._def.type._def.checks?.length){let{type:d,...e}=bq(a.keyType._def,b);return{...c,propertyNames:e}}return c}let bJ={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},bK=(a,b)=>{let c=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((a,c)=>bL(a._def,{...b,currentPath:[...b.currentPath,"anyOf",`${c}`]})).filter(a=>!!a&&(!b.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return c.length?{anyOf:c}:void 0};function bL(a,b,c=!1){let d=b.seen.get(a);if(b.override){let e=b.override?.(a,b,d,c);if(e!==ae)return e}if(d&&!c){let a=bM(d,b);if(void 0!==a)return a}let e={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,e);let f=((a,b,c)=>{switch(b){case o.ZodString:return bC(a,c);case o.ZodNumber:let d={type:"number"};if(!a.checks)return d;for(let b of a.checks)switch(b.kind){case"int":d.type="integer",af(d,"type",b.message,c);break;case"min":"jsonSchema7"===c.target?b.inclusive?ag(d,"minimum",b.value,b.message,c):ag(d,"exclusiveMinimum",b.value,b.message,c):(b.inclusive||(d.exclusiveMinimum=!0),ag(d,"minimum",b.value,b.message,c));break;case"max":"jsonSchema7"===c.target?b.inclusive?ag(d,"maximum",b.value,b.message,c):ag(d,"exclusiveMaximum",b.value,b.message,c):(b.inclusive||(d.exclusiveMaximum=!0),ag(d,"maximum",b.value,b.message,c));break;case"multipleOf":ag(d,"multipleOf",b.value,b.message,c)}return d;case o.ZodObject:return function(a,b){let c="openAi"===b.target,d={type:"object",properties:{}},e=[],f=a.shape();for(let a in f){let g=f[a];if(void 0===g||void 0===g._def)continue;let h=function(a){try{return a.isOptional()}catch{return!0}}(g);h&&c&&("ZodOptional"===g._def.typeName&&(g=g._def.innerType),g.isNullable()||(g=g.nullable()),h=!1);let i=bL(g._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==i&&(d.properties[a]=i,h||e.push(a))}e.length&&(d.required=e);let g=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return bL(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==g&&(d.additionalProperties=g),d}(a,c);case o.ZodBigInt:let e={type:"integer",format:"int64"};if(!a.checks)return e;for(let b of a.checks)switch(b.kind){case"min":"jsonSchema7"===c.target?b.inclusive?ag(e,"minimum",b.value,b.message,c):ag(e,"exclusiveMinimum",b.value,b.message,c):(b.inclusive||(e.exclusiveMinimum=!0),ag(e,"minimum",b.value,b.message,c));break;case"max":"jsonSchema7"===c.target?b.inclusive?ag(e,"maximum",b.value,b.message,c):ag(e,"exclusiveMaximum",b.value,b.message,c):(b.inclusive||(e.exclusiveMaximum=!0),ag(e,"maximum",b.value,b.message,c));break;case"multipleOf":ag(e,"multipleOf",b.value,b.message,c)}return e;case o.ZodBoolean:return{type:"boolean"};case o.ZodDate:return function a(b,c,d){let e=d??c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b,g=c;let h={type:"integer",format:"unix-time"};if("openApi3"===g.target)return h;for(let a of f.checks)switch(a.kind){case"min":ag(h,"minimum",a.value,a.message,g);break;case"max":ag(h,"maximum",a.value,a.message,g)}return h}}(a,c);case o.ZodUndefined:return{not:bp(c)};case o.ZodNull:return"openApi3"===c.target?{enum:["null"],nullable:!0}:{type:"null"};case o.ZodArray:let f;return f={type:"array"},a.type?._def&&a.type?._def?.typeName!==o.ZodAny&&(f.items=bL(a.type._def,{...c,currentPath:[...c.currentPath,"items"]})),a.minLength&&ag(f,"minItems",a.minLength.value,a.minLength.message,c),a.maxLength&&ag(f,"maxItems",a.maxLength.value,a.maxLength.message,c),a.exactLength&&(ag(f,"minItems",a.exactLength.value,a.exactLength.message,c),ag(f,"maxItems",a.exactLength.value,a.exactLength.message,c)),f;case o.ZodUnion:case o.ZodDiscriminatedUnion:if("openApi3"===c.target)return bK(a,c);let g=a.options instanceof Map?Array.from(a.options.values()):a.options;if(g.every(a=>a._def.typeName in bJ&&(!a._def.checks||!a._def.checks.length))){let a=g.reduce((a,b)=>{let c=bJ[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(g.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=g.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===g.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:g.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(g.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:g.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};return bK(a,c);case o.ZodIntersection:let h,i,j;return h=[bL(a.left._def,{...c,currentPath:[...c.currentPath,"allOf","0"]}),bL(a.right._def,{...c,currentPath:[...c.currentPath,"allOf","1"]})].filter(a=>!!a),i="jsonSchema2019-09"===c.target?{unevaluatedProperties:!1}:void 0,j=[],h.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)j.push(...a.allOf),void 0===a.unevaluatedProperties&&(i=void 0);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}else i=void 0;j.push(b)}}),j.length?{allOf:j,...i}:void 0;case o.ZodTuple:return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((a,b)=>bL(a._def,{...c,currentPath:[...c.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:bL(a.rest._def,{...c,currentPath:[...c.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((a,b)=>bL(a._def,{...c,currentPath:[...c.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case o.ZodRecord:return bI(a,c);case o.ZodLiteral:let k;return"bigint"!=(k=typeof a.value)&&"number"!==k&&"boolean"!==k&&"string"!==k?{type:Array.isArray(a.value)?"array":"object"}:"openApi3"===c.target?{type:"bigint"===k?"integer":k,enum:[a.value]}:{type:"bigint"===k?"integer":k,const:a.value};case o.ZodEnum:return{type:"string",enum:Array.from(a.values)};case o.ZodNativeEnum:let l,m,n;return l=a.values,{type:1===(n=Array.from(new Set((m=Object.keys(a.values).filter(a=>"number"!=typeof l[l[a]]).map(a=>l[a])).map(a=>typeof a)))).length?"string"===n[0]?"string":"number":["string","number"],enum:m};case o.ZodNullable:if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return"openApi3"===c.target?{type:bJ[a.innerType._def.typeName],nullable:!0}:{type:[bJ[a.innerType._def.typeName],"null"]};if("openApi3"===c.target){let b=bL(a.innerType._def,{...c,currentPath:[...c.currentPath]});return b&&"$ref"in b?{allOf:[b],nullable:!0}:b&&{...b,nullable:!0}}let p=bL(a.innerType._def,{...c,currentPath:[...c.currentPath,"anyOf","0"]});return p&&{anyOf:[p,{type:"null"}]};case o.ZodOptional:if(c.currentPath.toString()===c.propertyPath?.toString())return bL(a.innerType._def,c);let q=bL(a.innerType._def,{...c,currentPath:[...c.currentPath,"anyOf","1"]});return q?{anyOf:[{not:bp(c)},q]}:bp(c);case o.ZodMap:if("record"===c.mapStrategy)return bI(a,c);return{type:"array",maxItems:125,items:{type:"array",items:[bL(a.keyType._def,{...c,currentPath:[...c.currentPath,"items","items","0"]})||bp(c),bL(a.valueType._def,{...c,currentPath:[...c.currentPath,"items","items","1"]})||bp(c)],minItems:2,maxItems:2}};case o.ZodSet:let r;return r={type:"array",uniqueItems:!0,items:bL(a.valueType._def,{...c,currentPath:[...c.currentPath,"items"]})},a.minSize&&ag(r,"minItems",a.minSize.value,a.minSize.message,c),a.maxSize&&ag(r,"maxItems",a.maxSize.value,a.maxSize.message,c),r;case o.ZodLazy:return()=>a.getter()._def;case o.ZodPromise:return bL(a.type._def,c);case o.ZodNaN:case o.ZodNever:return"openAi"===c.target?void 0:{not:bp({...c,currentPath:[...c.currentPath,"not"]})};case o.ZodEffects:return"input"===c.effectStrategy?bL(a.schema._def,c):bp(c);case o.ZodAny:case o.ZodUnknown:return bp(c);case o.ZodDefault:return{...bL(a.innerType._def,c),default:a.defaultValue()};case o.ZodBranded:return bq(a,c);case o.ZodReadonly:case o.ZodCatch:return bL(a.innerType._def,c);case o.ZodPipeline:if("input"===c.pipeStrategy)return bL(a.in._def,c);if("output"===c.pipeStrategy)return bL(a.out._def,c);let s=bL(a.in._def,{...c,currentPath:[...c.currentPath,"allOf","0"]}),t=bL(a.out._def,{...c,currentPath:[...c.currentPath,"allOf",s?"1":"0"]});return{allOf:[s,t].filter(a=>void 0!==a)};case o.ZodFunction:case o.ZodVoid:case o.ZodSymbol:default:return}})(a,a.typeName,b),g="function"==typeof f?bL(f(),b):f;if(g&&bN(a,b,g),b.postProcess){let c=b.postProcess(g,a,b);return e.jsonSchema=g,c}return e.jsonSchema=g,g}let bM=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:ah(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),bp(b);return"seen"===b.$refStrategy?bp(b):void 0}},bN=(a,b,c)=>(a.description&&(c.description=a.description,b.markdownDescription&&(c.markdownDescription=a.description)),c);var bO={code:"0",name:"text",parse:a=>{if("string"!=typeof a)throw Error('"text" parts expect a string value.');return{type:"text",value:a}}},bP={code:"3",name:"error",parse:a=>{if("string"!=typeof a)throw Error('"error" parts expect a string value.');return{type:"error",value:a}}},bQ={code:"4",name:"assistant_message",parse:a=>{if(null==a||"object"!=typeof a||!("id"in a)||!("role"in a)||!("content"in a)||"string"!=typeof a.id||"string"!=typeof a.role||"assistant"!==a.role||!Array.isArray(a.content)||!a.content.every(a=>null!=a&&"object"==typeof a&&"type"in a&&"text"===a.type&&"text"in a&&null!=a.text&&"object"==typeof a.text&&"value"in a.text&&"string"==typeof a.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:a}}},bR={code:"5",name:"assistant_control_data",parse:a=>{if(null==a||"object"!=typeof a||!("threadId"in a)||!("messageId"in a)||"string"!=typeof a.threadId||"string"!=typeof a.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:a.threadId,messageId:a.messageId}}}},bS={code:"6",name:"data_message",parse:a=>{if(null==a||"object"!=typeof a||!("role"in a)||!("data"in a)||"string"!=typeof a.role||"data"!==a.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:a}}},bT=[bO,bP,bQ,bR,bS];bO.code,bP.code,bQ.code,bR.code,bS.code,bO.name,bO.code,bP.name,bP.code,bQ.name,bQ.code,bR.name,bR.code,bS.name,bS.code,bT.map(a=>a.code);var bU=[{code:"0",name:"text",parse:a=>{if("string"!=typeof a)throw Error('"text" parts expect a string value.');return{type:"text",value:a}}},{code:"2",name:"data",parse:a=>{if(!Array.isArray(a))throw Error('"data" parts expect an array value.');return{type:"data",value:a}}},{code:"3",name:"error",parse:a=>{if("string"!=typeof a)throw Error('"error" parts expect a string value.');return{type:"error",value:a}}},{code:"8",name:"message_annotations",parse:a=>{if(!Array.isArray(a))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:a}}},{code:"9",name:"tool_call",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("toolName"in a)||"string"!=typeof a.toolName||!("args"in a)||"object"!=typeof a.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:a}}},{code:"a",name:"tool_result",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("result"in a))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:a}}},{code:"b",name:"tool_call_streaming_start",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("toolName"in a)||"string"!=typeof a.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:a}}},{code:"c",name:"tool_call_delta",parse:a=>{if(null==a||"object"!=typeof a||!("toolCallId"in a)||"string"!=typeof a.toolCallId||!("argsTextDelta"in a)||"string"!=typeof a.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:a}}},{code:"d",name:"finish_message",parse:a=>{if(null==a||"object"!=typeof a||!("finishReason"in a)||"string"!=typeof a.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let b={finishReason:a.finishReason};return"usage"in a&&null!=a.usage&&"object"==typeof a.usage&&"promptTokens"in a.usage&&"completionTokens"in a.usage&&(b.usage={promptTokens:"number"==typeof a.usage.promptTokens?a.usage.promptTokens:NaN,completionTokens:"number"==typeof a.usage.completionTokens?a.usage.completionTokens:NaN}),{type:"finish_message",value:b}}},{code:"e",name:"finish_step",parse:a=>{if(null==a||"object"!=typeof a||!("finishReason"in a)||"string"!=typeof a.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let b={finishReason:a.finishReason,isContinued:!1};return"usage"in a&&null!=a.usage&&"object"==typeof a.usage&&"promptTokens"in a.usage&&"completionTokens"in a.usage&&(b.usage={promptTokens:"number"==typeof a.usage.promptTokens?a.usage.promptTokens:NaN,completionTokens:"number"==typeof a.usage.completionTokens?a.usage.completionTokens:NaN}),"isContinued"in a&&"boolean"==typeof a.isContinued&&(b.isContinued=a.isContinued),{type:"finish_step",value:b}}},{code:"f",name:"start_step",parse:a=>{if(null==a||"object"!=typeof a||!("messageId"in a)||"string"!=typeof a.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:a.messageId}}}},{code:"g",name:"reasoning",parse:a=>{if("string"!=typeof a)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:a}}},{code:"h",name:"source",parse:a=>{if(null==a||"object"!=typeof a)throw Error('"source" parts expect a Source object.');return{type:"source",value:a}}},{code:"i",name:"redacted_reasoning",parse:a=>{if(null==a||"object"!=typeof a||!("data"in a)||"string"!=typeof a.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:a.data}}}},{code:"j",name:"reasoning_signature",parse:a=>{if(null==a||"object"!=typeof a||!("signature"in a)||"string"!=typeof a.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:a.signature}}}},{code:"k",name:"file",parse:a=>{if(null==a||"object"!=typeof a||!("data"in a)||"string"!=typeof a.data||!("mimeType"in a)||"string"!=typeof a.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:a}}}],bV=Object.fromEntries(bU.map(a=>[a.code,a]));Object.fromEntries(bU.map(a=>[a.name,a.code]));var bW=bU.map(a=>a.code),bX=a=>{let b=a.indexOf(":");if(-1===b)throw Error("Failed to parse stream string. No separator found.");let c=a.slice(0,b);if(!bW.includes(c))throw Error(`Failed to parse stream string. Invalid code ${c}.`);let d=JSON.parse(a.slice(b+1));return bV[c].parse(d)};async function bY({stream:a,onTextPart:b,onReasoningPart:c,onReasoningSignaturePart:d,onRedactedReasoningPart:e,onSourcePart:f,onFilePart:g,onDataPart:h,onErrorPart:i,onToolCallStreamingStartPart:j,onToolCallDeltaPart:k,onToolCallPart:l,onToolResultPart:m,onMessageAnnotationsPart:n,onFinishMessagePart:o,onFinishStepPart:p,onStartStepPart:q}){let r=a.getReader(),s=new TextDecoder,t=[],u=0;for(;;){let{value:a}=await r.read();if(a&&(t.push(a),u+=a.length,10!==a[a.length-1]))continue;if(0===t.length)break;let v=function(a,b){let c=new Uint8Array(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return a.length=0,c}(t,u);for(let{type:a,value:r}of(u=0,s.decode(v,{stream:!0}).split("\n").filter(a=>""!==a).map(bX)))switch(a){case"text":await (null==b?void 0:b(r));break;case"reasoning":await (null==c?void 0:c(r));break;case"reasoning_signature":await (null==d?void 0:d(r));break;case"redacted_reasoning":await (null==e?void 0:e(r));break;case"file":await (null==g?void 0:g(r));break;case"source":await (null==f?void 0:f(r));break;case"data":await (null==h?void 0:h(r));break;case"error":await (null==i?void 0:i(r));break;case"message_annotations":await (null==n?void 0:n(r));break;case"tool_call_streaming_start":await (null==j?void 0:j(r));break;case"tool_call_delta":await (null==k?void 0:k(r));break;case"tool_call":await (null==l?void 0:l(r));break;case"tool_result":await (null==m?void 0:m(r));break;case"finish_message":await (null==o?void 0:o(r));break;case"finish_step":await (null==p?void 0:p(r));break;case"start_step":await (null==q?void 0:q(r));break;default:throw Error(`Unknown stream part type: ${a}`)}}}async function bZ({stream:a,update:b,onToolCall:c,onFinish:d,generateId:e=_,getCurrentDate:f=()=>new Date,lastMessage:g}){var h,i;let j,k,l,m=(null==g?void 0:g.role)==="assistant",n=m?1+(null!=(i=null==(h=g.toolInvocations)?void 0:h.reduce((a,b)=>{var c;return Math.max(a,null!=(c=b.step)?c:0)},0))?i:0):0,o=m?structuredClone(g):{id:e(),createdAt:f(),role:"assistant",content:"",parts:[]};function p(a,b){let c=o.parts.find(b=>"tool-invocation"===b.type&&b.toolInvocation.toolCallId===a);null!=c?c.toolInvocation=b:o.parts.push({type:"tool-invocation",toolInvocation:b})}let q=[],r=m?null==g?void 0:g.annotations:void 0,s={},t={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},u="unknown";function v(){let a=[...q];(null==r?void 0:r.length)&&(o.annotations=r),b({message:{...structuredClone(o),revisionId:e()},data:a,replaceLastMessage:m})}await bY({stream:a,onTextPart(a){null==j?(j={type:"text",text:a},o.parts.push(j)):j.text+=a,o.content+=a,v()},onReasoningPart(a){var b;null==l?(l={type:"text",text:a},null!=k&&k.details.push(l)):l.text+=a,null==k?(k={type:"reasoning",reasoning:a,details:[l]},o.parts.push(k)):k.reasoning+=a,o.reasoning=(null!=(b=o.reasoning)?b:"")+a,v()},onReasoningSignaturePart(a){null!=l&&(l.signature=a.signature)},onRedactedReasoningPart(a){null==k&&(k={type:"reasoning",reasoning:"",details:[]},o.parts.push(k)),k.details.push({type:"redacted",data:a.data}),l=void 0,v()},onFilePart(a){o.parts.push({type:"file",mimeType:a.mimeType,data:a.data}),v()},onSourcePart(a){o.parts.push({type:"source",source:a}),v()},onToolCallStreamingStartPart(a){null==o.toolInvocations&&(o.toolInvocations=[]),s[a.toolCallId]={text:"",step:n,toolName:a.toolName,index:o.toolInvocations.length};let b={state:"partial-call",step:n,toolCallId:a.toolCallId,toolName:a.toolName,args:void 0};o.toolInvocations.push(b),p(a.toolCallId,b),v()},onToolCallDeltaPart(a){let b=s[a.toolCallId];b.text+=a.argsTextDelta;let{value:c}=function(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=ab({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=ab({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}(b.text),d={state:"partial-call",step:b.step,toolCallId:a.toolCallId,toolName:b.toolName,args:c};o.toolInvocations[b.index]=d,p(a.toolCallId,d),v()},async onToolCallPart(a){let b={state:"call",step:n,...a};if(null!=s[a.toolCallId]?o.toolInvocations[s[a.toolCallId].index]=b:(null==o.toolInvocations&&(o.toolInvocations=[]),o.toolInvocations.push(b)),p(a.toolCallId,b),v(),c){let b=await c({toolCall:a});if(null!=b){let c={state:"result",step:n,...a,result:b};o.toolInvocations[o.toolInvocations.length-1]=c,p(a.toolCallId,c),v()}}},onToolResultPart(a){let b=o.toolInvocations;if(null==b)throw Error("tool_result must be preceded by a tool_call");let c=b.findIndex(b=>b.toolCallId===a.toolCallId);if(-1===c)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");let d={...b[c],state:"result",...a};b[c]=d,p(a.toolCallId,d),v()},onDataPart(a){q.push(...a),v()},onMessageAnnotationsPart(a){null==r?r=[...a]:r.push(...a),v()},onFinishStepPart(a){n+=1,j=a.isContinued?j:void 0,k=void 0,l=void 0},onStartStepPart(a){m||(o.id=a.messageId),o.parts.push({type:"step-start"}),v()},onFinishMessagePart(a){u=a.finishReason,null!=a.usage&&(t=function({promptTokens:a,completionTokens:b}){return{promptTokens:a,completionTokens:b,totalTokens:a+b}}(a.usage))},onErrorPart(a){throw Error(a)}}),null==d||d({message:o,finishReason:u,usage:t})}async function b$({stream:a,onTextPart:b}){let c=a.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:a,value:d}=await c.read();if(a)break;await b(d)}}async function b_({stream:a,update:b,onFinish:c,getCurrentDate:d=()=>new Date,generateId:e=_}){let f={type:"text",text:""},g={id:e(),createdAt:d(),role:"assistant",content:"",parts:[f]};await b$({stream:a,onTextPart:a=>{g.content+=a,f.text+=a,b({message:{...g},data:[],replaceLastMessage:!1})}}),null==c||c(g,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}async function b0({api:a,body:b,streamProtocol:c="data",credentials:d,headers:e,abortController:f,restoreMessagesOnFailure:g,onResponse:h,onUpdate:i,onFinish:j,onToolCall:k,generateId:l,fetch:m=fetch,lastMessage:n,requestType:o="generate"}){var p,q,r;let s="resume"===o?m(`${a}?chatId=${b.id}`,{method:"GET",headers:{"Content-Type":"application/json",...e},signal:null==(p=null==f?void 0:f())?void 0:p.signal,credentials:d}):m(a,{method:"POST",body:JSON.stringify(b),headers:{"Content-Type":"application/json",...e},signal:null==(q=null==f?void 0:f())?void 0:q.signal,credentials:d}),t=await s.catch(a=>{throw g(),a});if(h)try{await h(t)}catch(a){throw a}if(!t.ok)throw g(),Error(null!=(r=await t.text())?r:"Failed to fetch the chat response.");if(!t.body)throw Error("The response body is empty.");switch(c){case"text":return void await b_({stream:t.body,update:i,onFinish:j,generateId:l});case"data":return void await bZ({stream:t.body,update:i,lastMessage:n,onToolCall:k,onFinish({message:a,finishReason:b,usage:c}){j&&null!=a&&j(a,{usage:c,finishReason:b})},generateId:l});default:throw Error(`Unknown stream protocol: ${c}`)}}function b1(a){return null==a?void 0:a.reduce((a,b)=>{var c;return Math.max(a,null!=(c=b.step)?c:0)},0)}function b2(a){var b;return null!=(b=a.parts)?b:[...a.toolInvocations?a.toolInvocations.map(a=>({type:"tool-invocation",toolInvocation:a})):[],...a.reasoning?[{type:"reasoning",reasoning:a.reasoning,details:[{type:"text",text:a.reasoning}]}]:[],...a.content?[{type:"text",text:a.content}]:[]]}function b3(a){return a.map(a=>({...a,parts:b2(a)}))}async function b4(a){if(!a)return[];if(globalThis.FileList&&a instanceof globalThis.FileList)return Promise.all(Array.from(a).map(async a=>{let{name:b,type:c}=a;return{name:b,contentType:c,url:await new Promise((b,c)=>{let d=new FileReader;d.onload=a=>{var c;b(null==(c=a.target)?void 0:c.result)},d.onerror=a=>c(a),d.readAsDataURL(a)})}}));if(Array.isArray(a))return a;throw Error("Invalid attachments type")}function b5(a){if("assistant"!==a.role)return!1;let b=a.parts.reduce((a,b,c)=>"step-start"===b.type?c:a,-1),c=a.parts.slice(b+1).filter(a=>"tool-invocation"===a.type);return c.length>0&&c.every(a=>"result"in a.toolInvocation)}Symbol.for("vercel.ai.schema");var b6=a.i(87610);a.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],10261);var b7=Object.prototype.hasOwnProperty;let b8=new WeakMap,b9=()=>{},ca=b9(),cb=Object,cc=a=>a===ca,cd=(a,b)=>({...a,...b}),ce={},cf={},cg="undefined",ch=typeof document!=cg,ci=!1,cj=(a,b)=>{let c=b8.get(a);return[()=>!cc(b)&&a.get(b)||ce,d=>{if(!cc(b)){let e=a.get(b);b in cf||(cf[b]=e),c[5](b,cd(e,d),e||ce)}},c[6],()=>!cc(b)&&b in cf?cf[b]:!cc(b)&&a.get(b)||ce]},ck=!0,[cl,cm]=[b9,b9],cn={initFocus:a=>(ch&&document.addEventListener("visibilitychange",a),cl("focus",a),()=>{ch&&document.removeEventListener("visibilitychange",a),cm("focus",a)}),initReconnect:a=>{let b=()=>{ck=!0,a()},c=()=>{ck=!1};return cl("online",b),cl("offline",c),()=>{cm("online",b),cm("offline",c)}}},co=!q.default.useId,cp=!0,cq=q.useEffect,cr="u">typeof navigator&&navigator.connection;!cp&&cr&&(["slow-2g","2g"].includes(cr.effectiveType)||cr.saveData);let cs=new WeakMap,ct=(a,b)=>a===`[object ${b}]`,cu=0,cv=a=>{let b,c,d=typeof a,e=cb.prototype.toString.call(a),f=ct(e,"Date"),g=ct(e,"RegExp"),h=ct(e,"Object");if(cb(a)!==a||f||g)b=f?a.toJSON():"symbol"==d?a.toString():"string"==d?JSON.stringify(a):""+a;else{if(b=cs.get(a))return b;if(b=++cu+"~",cs.set(a,b),Array.isArray(a)){for(c=0,b="@";c<a.length;c++)b+=cv(a[c])+",";cs.set(a,b)}if(h){b="#";let d=cb.keys(a).sort();for(;!cc(c=d.pop());)cc(a[c])||(b+=c+":"+cv(a[c])+",");cs.set(a,b)}}return b},cw=a=>{if("function"==typeof a)try{a=a()}catch(b){a=""}let b=a;return[a="string"==typeof a?a:(Array.isArray(a)?a.length:a)?cv(a):"",b]},cx=0,cy=()=>++cx;async function cz(...a){let[b,c,d,e]=a,f=cd({populateCache:!0,throwOnError:!0},"boolean"==typeof e?{revalidate:e}:e||{}),g=f.populateCache,h=f.rollbackOnError,i=f.optimisticData,j=f.throwOnError;if("function"==typeof c){let a=[];for(let d of b.keys())!/^\$(inf|sub)\$/.test(d)&&c(b.get(d)._k)&&a.push(d);return Promise.all(a.map(k))}return k(c);async function k(c){let e,[k]=cw(c);if(!k)return;let[l,m]=cj(b,k),[n,o,p,q]=b8.get(b),r=()=>{let a=n[k];return("function"==typeof f.revalidate?f.revalidate(l().data,c):!1!==f.revalidate)&&(delete p[k],delete q[k],a&&a[0])?a[0](2).then(()=>l().data):l().data};if(a.length<3)return r();let s=d,t=!1,u=cy();o[k]=[u,0];let v=!cc(i),w=l(),x=w.data,y=w._c,z=cc(y)?x:y;if(v&&m({data:i="function"==typeof i?i(z,x):i,_c:z}),"function"==typeof s)try{s=s(z)}catch(a){e=a,t=!0}if(s&&"function"==typeof s.then){let a;if(s=await s.catch(a=>{e=a,t=!0}),u!==o[k][0]){if(t)throw e;return s}t&&v&&(a=e,"function"==typeof h?h(a):!1!==h)&&(g=!0,m({data:z,_c:ca}))}if(g&&!t&&("function"==typeof g?m({data:g(s,z),error:ca,_c:ca}):m({data:s,error:ca,_c:ca})),o[k][1]=cy(),Promise.resolve(r()).then(()=>{m({_c:ca})}),t){if(j)throw e;return}return s}}let cA=(a,b)=>{if(!b8.has(a)){cd(cn,b);let c=Object.create(null),d=cz.bind(ca,a),e=Object.create(null),f=(a,b)=>{let c=e[a]||[];return e[a]=c,c.push(b),()=>c.splice(c.indexOf(b),1)},g=(b,c,d)=>{a.set(b,c);let f=e[b];if(f)for(let a of f)a(c,d)},h=()=>{b8.has(a)||b8.set(a,[c,Object.create(null),Object.create(null),Object.create(null),d,g,f])};return h(),[a,d,h,b9]}return[a,b8.get(a)[4]]},[cB,cC]=cA(new Map),cD=cd({onLoadingSlow:b9,onSuccess:b9,onError:b9,onErrorRetry:(a,b,c,d,e)=>{let f=c.errorRetryCount,g=e.retryCount,h=~~((Math.random()+.5)*(1<<(g<8?g:8)))*c.errorRetryInterval;(cc(f)||!(g>f))&&setTimeout(d,h,e)},onDiscarded:b9,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:3e3,compare:function a(b,c){var d,e;if(b===c)return!0;if(b&&c&&(d=b.constructor)===c.constructor){if(d===Date)return b.getTime()===c.getTime();if(d===RegExp)return b.toString()===c.toString();if(d===Array){if((e=b.length)===c.length)for(;e--&&a(b[e],c[e]););return -1===e}if(!d||"object"==typeof b){for(d in e=0,b)if(b7.call(b,d)&&++e&&!b7.call(c,d)||!(d in c)||!a(b[d],c[d]))return!1;return Object.keys(c).length===e}}return b!=b&&c!=c},isPaused:()=>!1,cache:cB,mutate:cC,fallback:{}},{isOnline:()=>ck,isVisible:()=>{let a=ch&&document.visibilityState;return cc(a)||"hidden"!==a}}),cE=(a,b)=>{let c=cd(a,b);if(b){let{use:d,fallback:e}=a,{use:f,fallback:g}=b;d&&f&&(c.use=d.concat(f)),e&&g&&(c.fallback=cd(e,g))}return c},cF=(0,q.createContext)({});var cG=a.i(10261);let cH=!1,cI=(cH?window.__SWR_DEVTOOLS_USE__:[]).concat(a=>(b,c,d)=>{let e=c&&((...a)=>{let[d]=cw(b),[,,,e]=b8.get(cB);if(d.startsWith("$inf$"))return c(...a);let f=e[d];return cc(f)?c(...a):(delete e[d],f)});return a(b,e,d)});cH&&(window.__SWR_DEVTOOLS_REACT__=q.default);let cJ=()=>{},cK=cJ(),cL=(new WeakMap,q.default.use||(a=>{switch(a.status){case"pending":throw a;case"fulfilled":return a.value;case"rejected":throw a.reason;default:throw a.status="pending",a.then(b=>{a.status="fulfilled",a.value=b},b=>{a.status="rejected",a.reason=b}),a}})),cM={dedupe:!0},cN=Promise.resolve(ca);cb.defineProperty(a=>{let{value:b}=a,c=(0,q.useContext)(cF),d="function"==typeof b,e=(0,q.useMemo)(()=>d?b(c):b,[d,c,b]),f=(0,q.useMemo)(()=>d?e:cE(c,e),[d,c,e]),g=e&&e.provider,h=(0,q.useRef)(ca);g&&!h.current&&(h.current=cA(g(f.cache||cB),e));let i=h.current;return i&&(f.cache=i[0],f.mutate=i[1]),cq(()=>{if(i)return i[2]&&i[2](),i[3]},[]),(0,q.createElement)(cF.Provider,cd(a,{value:f}))},"defaultValue",{value:cD});let cO=(d=(a,b,c)=>{let{cache:d,compare:e,suspense:f,fallbackData:g,revalidateOnMount:h,revalidateIfStale:i,refreshInterval:j,refreshWhenHidden:k,refreshWhenOffline:l,keepPreviousData:m,strictServerPrefetchWarning:n}=c,[o,p,r,s]=b8.get(d),[t,u]=cw(a),v=(0,q.useRef)(!1),w=(0,q.useRef)(!1),x=(0,q.useRef)(t),y=(0,q.useRef)(b),z=(0,q.useRef)(c),A=()=>z.current.isVisible()&&z.current.isOnline(),[B,C,D,E]=cj(d,t),F=(0,q.useRef)({}).current,G=cc(g)?cc(c.fallback)?ca:c.fallback[t]:g,H=(a,b)=>{for(let c in F)if("data"===c){if(!e(a[c],b[c])&&(!cc(a[c])||!e(Q,b[c])))return!1}else if(b[c]!==a[c])return!1;return!0},I=(0,q.useMemo)(()=>{let a=!!t&&!!b&&(cc(h)?!z.current.isPaused()&&!f&&!1!==i:h),c=b=>{let c=cd(b);return(delete c._k,a)?{isValidating:!0,isLoading:!0,...c}:c},d=B(),e=E(),g=c(d),j=d===e?g:c(e),k=g;return[()=>{let a=c(B());return H(a,k)?(k.data=a.data,k.isLoading=a.isLoading,k.isValidating=a.isValidating,k.error=a.error,k):(k=a,a)},()=>j]},[d,t]),J=(0,b6.useSyncExternalStore)((0,q.useCallback)(a=>D(t,(b,c)=>{H(c,b)||a()}),[d,t]),I[0],I[1]),K=!v.current,L=o[t]&&o[t].length>0,M=J.data,N=cc(M)?G&&"function"==typeof G.then?cL(G):G:M,O=J.error,P=(0,q.useRef)(N),Q=m?cc(M)?cc(P.current)?N:P.current:M:N,R=t&&cc(N),S=!cp&&(0,b6.useSyncExternalStore)(()=>b9,()=>!1,()=>!0);n&&S&&!f&&R&&console.warn(`Missing pre-initiated data for serialized key "${t}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);let T=(!L||!!cc(O))&&(K&&!cc(h)?h:!z.current.isPaused()&&(f?!cc(N)&&i:cc(N)||i)),U=!!(t&&b&&K&&T),V=cc(J.isValidating)?U:J.isValidating,W=cc(J.isLoading)?U:J.isLoading,X=(0,q.useCallback)(async a=>{let b,d,f=y.current;if(!t||!f||w.current||z.current.isPaused())return!1;let g=!0,h=a||{},i=!r[t]||!h.dedupe,j=()=>co?!w.current&&t===x.current&&v.current:t===x.current,k={isValidating:!1,isLoading:!1},l=()=>{C(k)},m=()=>{let a=r[t];a&&a[1]===d&&delete r[t]},n={isValidating:!0};cc(B().data)&&(n.isLoading=!0);try{if(i&&(C(n),c.loadingTimeout&&cc(B().data)&&setTimeout(()=>{g&&j()&&z.current.onLoadingSlow(t,c)},c.loadingTimeout),r[t]=[f(u),cy()]),[b,d]=r[t],b=await b,i&&setTimeout(m,c.dedupingInterval),!r[t]||r[t][1]!==d)return i&&j()&&z.current.onDiscarded(t),!1;k.error=ca;let a=p[t];if(!cc(a)&&(d<=a[0]||d<=a[1]||0===a[1]))return l(),i&&j()&&z.current.onDiscarded(t),!1;let h=B().data;k.data=e(h,b)?h:b,i&&j()&&z.current.onSuccess(b,t,c)}catch(c){m();let a=z.current,{shouldRetryOnError:b}=a;!a.isPaused()&&(k.error=c,i&&j())&&(a.onError(c,t,a),(!0===b||"function"==typeof b&&b(c))&&(!z.current.revalidateOnFocus||!z.current.revalidateOnReconnect||A())&&a.onErrorRetry(c,t,a,a=>{let b=o[t];b&&b[0]&&b[0](cG.ERROR_REVALIDATE_EVENT,a)},{retryCount:(h.retryCount||0)+1,dedupe:!0}))}return g=!1,l(),!0},[t,d]),Y=(0,q.useCallback)((...a)=>cz(d,x.current,...a),[]);if(cq(()=>{y.current=b,z.current=c,cc(M)||(P.current=M)}),cq(()=>{var a;let b;if(!t)return;let c=X.bind(ca,cM),d=0;z.current.revalidateOnFocus&&(d=Date.now()+z.current.focusThrottleInterval);let e=(a=(a,b={})=>{if(a==cG.FOCUS_EVENT){let a=Date.now();z.current.revalidateOnFocus&&a>d&&A()&&(d=a+z.current.focusThrottleInterval,c())}else if(a==cG.RECONNECT_EVENT)z.current.revalidateOnReconnect&&A()&&c();else if(a==cG.MUTATE_EVENT)return X();else if(a==cG.ERROR_REVALIDATE_EVENT)return X(b)},(b=o[t]||(o[t]=[])).push(a),()=>{let c=b.indexOf(a);c>=0&&(b[c]=b[b.length-1],b.pop())});if(w.current=!1,x.current=t,v.current=!0,C({_k:u}),T&&!r[t])if(cc(N)||cp)c();else setTimeout(c,1);return()=>{w.current=!0,e()}},[t]),cq(()=>{let a;function b(){let b="function"==typeof j?j(B().data):j;b&&-1!==a&&(a=setTimeout(c,b))}function c(){!B().error&&(k||z.current.isVisible())&&(l||z.current.isOnline())?X(cM).then(b):b()}return b(),()=>{a&&(clearTimeout(a),a=-1)}},[j,k,l,t]),(0,q.useDebugValue)(Q),f){if(!co&&cp&&R)throw Error("Fallback data is required when using Suspense in SSR.");R&&(y.current=b,z.current=c,w.current=!1);let a=s[t];if(cL(!cc(a)&&R?Y(a):cN),!cc(O)&&R)throw O;let d=R?X(cM):cN;!cc(Q)&&R&&(d.status="fulfilled",d.value=!0),cL(d)}return{mutate:Y,get data(){return F.data=!0,Q},get error(){return F.error=!0,O},get isValidating(){return F.isValidating=!0,V},get isLoading(){return F.isLoading=!0,W}}},function(...a){let b,c=(b=(0,q.useContext)(cF),(0,q.useMemo)(()=>cd(cD,b),[b])),[e,f,g]="function"==typeof a[1]?[a[0],a[1],a[2]||{}]:[a[0],null,(null===a[1]?a[2]:a[1])||{}],h=cE(c,g),i=d,{use:j}=h,k=(j||[]).concat(cI);for(let a=k.length;a--;)i=k[a](i);return i(e,f||h.fetcher||null,h)});var cP=a.i(13350);function cQ(a,b){return null!=b?(0,cP.default)(a,b):a}var cR=function({api:a="/api/chat",id:b,initialMessages:c,initialInput:d="",sendExtraMessageFields:e,onToolCall:f,experimental_prepareRequestBody:g,maxSteps:h=1,streamProtocol:i="data",onResponse:j,onFinish:k,onError:l,credentials:m,headers:n,body:o,generateId:p=_,fetch:r,keepLastMessageOnError:s=!0,experimental_throttle:t}={}){let[u]=(0,q.useState)(p),v=null!=b?b:u,w="string"==typeof a?[a,v]:v,x=function(a){let[b,c]=(0,q.useState)(a);return(0,q.useEffect)(()=>{!function a(b,c){if(b===c)return!0;if(null==b||null==c)return!1;if("object"!=typeof b&&"object"!=typeof c)return b===c;if(b.constructor!==c.constructor)return!1;if(b instanceof Date&&c instanceof Date)return b.getTime()===c.getTime();if(Array.isArray(b)){if(b.length!==c.length)return!1;for(let d=0;d<b.length;d++)if(!a(b[d],c[d]))return!1;return!0}let d=Object.keys(b),e=Object.keys(c);if(d.length!==e.length)return!1;for(let f of d)if(!e.includes(f)||!a(b[f],c[f]))return!1;return!0}(a,b)&&c(a)},[a,b]),b}(null!=c?c:[]),{data:y,mutate:z}=cO([w,"messages"],null,{fallbackData:(0,q.useMemo)(()=>b3(x),[x])}),A=(0,q.useRef)(y||[]);(0,q.useEffect)(()=>{A.current=y||[]},[y]);let{data:B,mutate:C}=cO([w,"streamData"],null),D=(0,q.useRef)(B);(0,q.useEffect)(()=>{D.current=B},[B]);let{data:E="ready",mutate:F}=cO([w,"status"],null),{data:G,mutate:H}=cO([w,"error"],null),I=(0,q.useRef)(null),J=(0,q.useRef)({credentials:m,headers:n,body:o});(0,q.useEffect)(()=>{J.current={credentials:m,headers:n,body:o}},[m,n,o]);let K=(0,q.useCallback)(async(b,c="generate")=>{var d,m;F("submitted"),H(void 0);let n=b3(b.messages),o=n.length,q=b1(null==(d=n[n.length-1])?void 0:d.toolInvocations);try{I.current=new AbortController;let d=cQ(z,t),h=cQ(C,t),l=A.current;d(n,!1);let o=e?n:n.map(({role:a,content:b,experimental_attachments:c,data:d,annotations:e,toolInvocations:f,parts:g})=>({role:a,content:b,...void 0!==c&&{experimental_attachments:c},...void 0!==d&&{data:d},...void 0!==e&&{annotations:e},...void 0!==f&&{toolInvocations:f},...void 0!==g&&{parts:g}})),q=D.current;await b0({api:a,body:null!=(m=null==g?void 0:g({id:v,messages:n,requestData:b.data,requestBody:b.body}))?m:{id:v,messages:o,data:b.data,...J.current.body,...b.body},streamProtocol:i,credentials:J.current.credentials,headers:{...J.current.headers,...b.headers},abortController:()=>I.current,restoreMessagesOnFailure(){s||d(l,!1)},onResponse:j,onUpdate({message:a,data:b,replaceLastMessage:c}){F("streaming"),d([...c?n.slice(0,n.length-1):n,a],!1),(null==b?void 0:b.length)&&h([...null!=q?q:[],...b],!1)},onToolCall:f,onFinish:k,generateId:p,fetch:r,lastMessage:n[n.length-1],requestType:c}),I.current=null,F("ready")}catch(a){if("AbortError"===a.name)return I.current=null,F("ready"),null;l&&a instanceof Error&&l(a),H(a),F("error")}let u=A.current;(function({originalMaxToolInvocationStep:a,originalMessageCount:b,maxSteps:c,messages:d}){var e;let f=d[d.length-1];return c>1&&null!=f&&(d.length>b||b1(f.toolInvocations)!==a)&&b5(f)&&(null!=(e=b1(f.toolInvocations))?e:0)<c})({originalMaxToolInvocationStep:q,originalMessageCount:o,maxSteps:h,messages:u})&&await K({messages:u})},[z,F,a,J,j,k,l,H,C,D,i,e,g,f,h,A,I,p,r,s,t,v]),L=(0,q.useCallback)(async(a,{data:b,headers:c,body:d,experimental_attachments:e=a.experimental_attachments}={})=>{var f,g;let h=await b4(e);return K({messages:A.current.concat({...a,id:null!=(f=a.id)?f:p(),createdAt:null!=(g=a.createdAt)?g:new Date,experimental_attachments:h.length>0?h:void 0,parts:b2(a)}),headers:c,body:d,data:b})},[K,p]),M=(0,q.useCallback)(async({data:a,headers:b,body:c}={})=>{let d=A.current;return 0===d.length?null:K({messages:"assistant"===d[d.length-1].role?d.slice(0,-1):d,headers:b,body:c,data:a})},[K]),N=(0,q.useCallback)(()=>{I.current&&(I.current.abort(),I.current=null)},[]),O=(0,q.useCallback)(async()=>{K({messages:A.current},"resume")},[K]),P=(0,q.useCallback)(a=>{"function"==typeof a&&(a=a(A.current));let b=b3(a);z(b,!1),A.current=b},[z]),Q=(0,q.useCallback)(a=>{"function"==typeof a&&(a=a(D.current)),C(a,!1),D.current=a},[C]),[R,S]=(0,q.useState)(d),T=(0,q.useCallback)(async(a,b={},c)=>{var d;if(null==(d=null==a?void 0:a.preventDefault)||d.call(a),!R&&!b.allowEmptySubmit)return;c&&(J.current={...J.current,...c});let e=await b4(b.experimental_attachments);K({messages:A.current.concat({id:p(),createdAt:new Date,role:"user",content:R,experimental_attachments:e.length>0?e:void 0,parts:[{type:"text",text:R}]}),headers:b.headers,body:b.body,data:b.data}),S("")},[R,p,K]),U=(0,q.useCallback)(({toolCallId:a,result:b})=>{let c=A.current;!function({messages:a,toolCallId:b,toolResult:c}){var d;let e=a[a.length-1],f=e.parts.find(a=>"tool-invocation"===a.type&&a.toolInvocation.toolCallId===b);if(null==f)return;let g={...f.toolInvocation,state:"result",result:c};f.toolInvocation=g,e.toolInvocations=null==(d=e.toolInvocations)?void 0:d.map(a=>a.toolCallId===b?g:a)}({messages:c,toolCallId:a,toolResult:b}),z([...c.slice(0,c.length-1),{...c[c.length-1]}],!1),"submitted"===E||"streaming"===E||b5(c[c.length-1])&&K({messages:c})},[z,E,K]);return{messages:null!=y?y:[],id:v,setMessages:P,data:B,setData:Q,error:G,append:L,reload:M,stop:N,experimental_resume:O,input:R,setInput:S,handleInputChange:a=>{S(a.target.value)},handleSubmit:T,isLoading:"submitted"===E||"streaming"===E,status:E,addToolResult:U}};let cS=({setView:a,mode:b,setMode:c,onClose:d,treatments:e})=>{let f=(0,G.useToast)();Array.isArray(e);let{messages:g,input:h,setInput:i,handleInputChange:j,append:k,error:l}=cR({api:"/api/chat",initialMessages:[{id:"intro",role:"assistant",content:"Hello! I'm HEALO AI Agent. Ask me about treatments (e.g., 'anti-aging', 'cancer care')."}]}),m=(0,q.useRef)(null),[n,o]=(0,q.useState)(null),r=(0,q.useRef)(null),t=(0,q.useMemo)(()=>"u">typeof crypto&&crypto.randomUUID?crypto.randomUUID():`sess_${Date.now()}_${Math.random().toString(36).slice(2,10)}`,[]),[J,K]=(0,q.useState)({firstName:"",lastName:"",email:"",nationality:"",spokenLanguage:"",contactMethod:"",contactId:"",treatmentType:"",preferredDate:"",preferredDateFlex:!1,message:"",file:null,privacyAgreed:!1}),L=()=>{let a=h.trim();a&&(k({role:"user",content:a},{body:{lang:(0,H.getLangCodeFromCookie)(),session_id:t,page:null,utm:null}}).catch(()=>{f.error("AI response failed. Please try again.")}),i(""))};(0,q.useEffect)(()=>{if(!l){r.current=null;return}r.current!==l&&(r.current=l,f.error("AI response failed. Please try again."))},[l,f]),(0,q.useEffect)(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[g]),(0,q.useEffect)(()=>{"form"===b&&fetch("/api/inquiries/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventType:"step1_viewed"})}).catch(()=>{})},[b]);let M=async()=>{let b=J.email?.trim()||J.contactMethod&&J.contactId?.trim(),c=!!J.preferredDate?.trim()||!!J.preferredDateFlex;if(!J.treatmentType?.trim())return void f.error("Please select Main Concern.");if(!J.nationality?.trim())return void f.error("Please enter Nationality.");if(!J.spokenLanguage?.trim())return void f.error("Please enter Spoken Language.");if(!b)return void f.error("Please provide Email or Messenger (method + ID).");if(!c)return void f.error("Please set Preferred Date or check Flexible.");if(!J.privacyAgreed)return void f.error("Please agree to the Privacy Policy.");try{let b=null,c=[];if(J.file){let a=`inquiry/${Date.now()}_${J.file.name}`,{error:d}=await E.supabase.storage.from("attachments").upload(a,J.file);if(d)throw d;b=a,c=[{path:a,name:J.file.name,type:J.file.type||null}]}let d=J.preferredDateFlex?null:J.preferredDate?new Date(J.preferredDate).toISOString().split("T")[0]:null,{data:e,error:f}=await E.supabase.from("inquiries").insert([{first_name:J.firstName||null,last_name:J.lastName||null,email:J.email||null,nationality:J.nationality,spoken_language:J.spokenLanguage,contact_method:J.contactMethod||null,contact_id:J.contactId||null,treatment_type:J.treatmentType,preferred_date:d,preferred_date_flex:!!J.preferredDateFlex,message:J.message||null,attachment:b,attachments:c,intake:{},status:""}]).select("id, public_token").single();if(f)throw f;let g=e?.id;if(e?.public_token,g)try{let a=await fetch("/api/inquiry/normalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inquiry_id:g,source_type:"inquiry_form",source_inquiry_id:g})});if(!a.ok){let b=await a.json().catch(()=>({}));console.error("[InquiryForm] normalize API error:",a.status,b)}}catch(a){console.error("[InquiryForm] normalize call failed:",a)}null!=g&&fetch("/api/inquiries/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventType:"step1_submitted",inquiryId:g})}).catch(()=>{});let h=(0,H.getLangCodeFromCookie)();if(h){let a="string"==typeof J.treatmentType&&/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(J.treatmentType)?J.treatmentType:null;(0,I.event)("submit_inquiry",{source_type:"inquiry_form",treatment_slug:a,lang:h})}a("success")}catch(a){console.error("Error:",a),f.error("Failed to submit inquiry. Please try again.")}};return(0,p.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8 md:py-16 text-center animate-in fade-in slide-in-from-bottom-4",children:[(0,p.jsxs)("button",{onClick:()=>{"select"===b?d?d():a("home"):c("select")},className:"flex items-center text-sm font-bold text-gray-500 mb-6 md:mb-8 hover:text-teal-600",children:[(0,p.jsx)(s.ChevronLeft,{size:16})," ","select"===b?"Back":"Back to Options"]}),"select"===b&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-8 md:mb-12",children:"How would you like to proceed?"}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,p.jsxs)("div",{onClick:()=>{let a=(0,H.getLangCodeFromCookie)();a&&(0,I.event)("start_inquiry",{source_type:"ai_agent",lang:a}),c("ai")},className:"bg-white border border-teal-100 rounded-3xl p-6 md:p-8 hover:border-teal-500 hover:shadow-xl transition-all cursor-pointer group flex flex-row md:flex-col items-center text-left md:text-center gap-4 md:gap-0",children:[(0,p.jsx)("div",{className:"w-14 h-14 md:w-20 md:h-20 bg-teal-50 rounded-full flex items-center justify-center md:mb-6 shrink-0 group-hover:bg-teal-100 transition-colors",children:(0,p.jsx)(u,{size:28,className:"text-teal-600 md:w-10 md:h-10"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-1 md:mb-2",children:"AI Agent"}),(0,p.jsx)("p",{className:"text-gray-500 text-xs md:text-sm leading-relaxed",children:"Instant answers & recommendations."})]})]}),(0,p.jsxs)("div",{onClick:()=>c("human"),className:"bg-white border border-teal-100 rounded-3xl p-6 md:p-8 hover:border-green-500 hover:shadow-xl transition-all cursor-pointer group flex flex-row md:flex-col items-center text-left md:text-center gap-4 md:gap-0",children:[(0,p.jsx)("div",{className:"w-14 h-14 md:w-20 md:h-20 bg-green-50 rounded-full flex items-center justify-center md:mb-6 shrink-0 group-hover:bg-green-100 transition-colors",children:(0,p.jsx)(v.MessageCircle,{size:28,className:"text-green-600 md:w-10 md:h-10"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-1 md:mb-2",children:"Human Agent"}),(0,p.jsx)("p",{className:"text-gray-500 text-xs md:text-sm leading-relaxed",children:"Chat via WhatsApp or Line."})]})]}),(0,p.jsxs)("div",{onClick:()=>{let a=(0,H.getLangCodeFromCookie)();a&&(0,I.event)("start_inquiry",{source_type:"inquiry_form",lang:a}),c("form")},className:"bg-white border border-teal-100 rounded-3xl p-6 md:p-8 hover:border-blue-500 hover:shadow-xl transition-all cursor-pointer group flex flex-row md:flex-col items-center text-left md:text-center gap-4 md:gap-0",children:[(0,p.jsx)("div",{className:"w-14 h-14 md:w-20 md:h-20 bg-blue-50 rounded-full flex items-center justify-center md:mb-6 shrink-0 group-hover:bg-blue-100 transition-colors",children:(0,p.jsx)(w,{size:28,className:"text-blue-600 md:w-10 md:h-10"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 mb-1 md:mb-2",children:"Inquiry Form"}),(0,p.jsx)("p",{className:"text-gray-500 text-xs md:text-sm leading-relaxed",children:"Get a specific quote via email."})]})]})]})]}),"ai"===b&&(0,p.jsxs)("div",{className:"bg-white border border-gray-200 rounded-3xl shadow-xl h-[600px] flex flex-col p-4 animate-in fade-in slide-in-from-right-4",children:[(0,p.jsx)("div",{className:"flex-1 overflow-y-auto mb-4 bg-gray-50 rounded-2xl p-4 text-left space-y-4",ref:m,children:g.map(a=>{let b=Array.isArray(a.parts)?a.parts.filter(a=>"text"===a.type).map(a=>a.text).join(""):"",c=a.content||b||"";return(0,p.jsxs)("div",{className:`flex gap-3 ${"user"===a.role?"flex-row-reverse":""}`,children:[(0,p.jsxs)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0 ${"assistant"===a.role?"bg-teal-600":"bg-gray-400"}`,children:[" ","assistant"===a.role?"AI":"U"," "]}),(0,p.jsx)("div",{className:`p-3 rounded-2xl shadow-sm text-sm border max-w-[80%] ${"assistant"===a.role?"bg-white border-gray-100 rounded-tl-none":"bg-teal-600 text-white border-teal-600 rounded-tr-none"}`,children:(0,p.jsx)("p",{className:"whitespace-pre-wrap",children:c})})]},a.id)})}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",{type:"text",value:h,onChange:j,onKeyPress:a=>"Enter"===a.key&&L(),placeholder:"Ask about 'Lifting' or 'Cancer'...",className:"w-full border border-gray-300 rounded-full py-3 px-5 pr-12 focus:outline-none focus:ring-2 focus:ring-teal-500"}),(0,p.jsx)("button",{onClick:L,className:"absolute right-2 top-1.5 bg-teal-600 text-white p-1.5 rounded-full hover:bg-teal-700 transition",children:(0,p.jsx)(x.ArrowRight,{size:18})})]}),(0,p.jsxs)("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-xl p-3 flex items-start gap-2.5 text-left",children:[(0,p.jsx)(y.AlertCircle,{size:16,className:"text-gray-500 shrink-0 mt-0.5"}),(0,p.jsxs)("p",{className:"text-xs text-gray-600 leading-relaxed",children:[(0,p.jsx)("span",{className:"font-bold text-gray-800",children:"Disclaimer:"})," AI may produce inaccurate information. This is not medical advice. Please consult with our coordinators for confirmation."]})]})]}),"human"===b&&(0,p.jsxs)("div",{className:"animate-in fade-in slide-in-from-right-4",children:[(0,p.jsxs)("div",{className:"text-center mb-8 md:mb-12",children:[(0,p.jsx)("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-teal-50 rounded-full flex items-center justify-center mx-auto mb-4 text-teal-600",children:(0,p.jsx)(z,{size:28,className:"md:w-8 md:h-8"})}),(0,p.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Human Agent"}),(0,p.jsxs)("p",{className:"text-gray-500 text-sm md:text-base max-w-lg mx-auto leading-relaxed",children:["Connect directly with our expert medical coordinators.",(0,p.jsx)("br",{className:"hidden md:block"}),"We reply within 10 mins during business hours."]})]}),(0,p.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-3 gap-3 md:gap-6 max-w-md md:max-w-none mx-auto",children:[(0,p.jsxs)("a",{href:"#",className:"group bg-white border border-gray-200 rounded-2xl p-4 md:p-8 hover:border-[#25D366] hover:shadow-xl transition-all cursor-pointer flex flex-row md:flex-col items-center gap-4 md:gap-0 text-left md:text-center",children:[(0,p.jsx)("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-[#25D366]/10 rounded-xl md:rounded-2xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300",children:(0,p.jsx)(v.MessageCircle,{className:"w-6 h-6 md:w-8 md:h-8 text-[#25D366]"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-base md:text-xl font-bold text-gray-900 md:mb-1",children:"WhatsApp"}),(0,p.jsx)("p",{className:"text-xs md:text-sm text-gray-400 md:mb-6",children:"Global Support"})]}),(0,p.jsxs)("div",{className:"text-[#25D366] font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:[(0,p.jsx)("span",{className:"hidden md:inline",children:"Chat Now"})," ",(0,p.jsx)(x.ArrowRight,{size:20})]})]}),(0,p.jsxs)("a",{href:"#",className:"group bg-white border border-gray-200 rounded-2xl p-4 md:p-8 hover:border-[#06C755] hover:shadow-xl transition-all cursor-pointer flex flex-row md:flex-col items-center gap-4 md:gap-0 text-left md:text-center",children:[(0,p.jsx)("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-[#06C755]/10 rounded-xl md:rounded-2xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300",children:(0,p.jsx)(v.MessageCircle,{className:"w-6 h-6 md:w-8 md:h-8 text-[#06C755]"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-base md:text-xl font-bold text-gray-900 md:mb-1",children:"LINE"}),(0,p.jsx)("p",{className:"text-xs md:text-sm text-gray-400 md:mb-6",children:"Japan / Thai"})]}),(0,p.jsxs)("div",{className:"text-[#06C755] font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:[(0,p.jsx)("span",{className:"hidden md:inline",children:"Chat Now"})," ",(0,p.jsx)(x.ArrowRight,{size:20})]})]}),(0,p.jsxs)("a",{href:"#",className:"group bg-white border border-gray-200 rounded-2xl p-4 md:p-8 hover:border-[#07C160] hover:shadow-xl transition-all cursor-pointer flex flex-row md:flex-col items-center gap-4 md:gap-0 text-left md:text-center",children:[(0,p.jsx)("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-[#07C160]/10 rounded-xl md:rounded-2xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform duration-300",children:(0,p.jsx)(v.MessageCircle,{className:"w-6 h-6 md:w-8 md:h-8 text-[#07C160]"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-base md:text-xl font-bold text-gray-900 md:mb-1",children:"WeChat"}),(0,p.jsx)("p",{className:"text-xs md:text-sm text-gray-400 md:mb-6",children:"China Support"})]}),(0,p.jsxs)("div",{className:"text-[#07C160] font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:[(0,p.jsx)("span",{className:"hidden md:inline",children:"Chat Now"})," ",(0,p.jsx)(x.ArrowRight,{size:20})]})]})]})]}),"form"===b&&(0,p.jsxs)("div",{className:"bg-white border border-gray-200 rounded-3xl shadow-xl p-5 md:p-8 text-left max-w-2xl mx-auto animate-in fade-in slide-in-from-right-4 mb-20",children:[(0,p.jsxs)("div",{className:"mb-6 md:mb-8 border-b border-gray-100 pb-4 md:pb-6",children:[(0,p.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Inquiry Form"}),(0,p.jsx)("p",{className:"text-gray-500 text-xs md:text-sm",children:"Fill in the details for a personalized quote."})]}),(0,p.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:"First Name"}),(0,p.jsx)("input",{type:"text",value:J.firstName,onChange:a=>K({...J,firstName:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",placeholder:"John"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:"Last Name"}),(0,p.jsx)("input",{type:"text",value:J.lastName,onChange:a=>K({...J,lastName:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",placeholder:"Doe"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Email ",(0,p.jsx)("span",{className:"text-gray-400 font-normal",children:"(or Messenger below)"})]}),(0,p.jsx)("input",{type:"email",value:J.email,onChange:a=>K({...J,email:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",placeholder:"your@email.com"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-teal-700 mb-1 ml-1 flex gap-1 items-center",children:[(0,p.jsx)(v.MessageCircle,{size:12})," Messenger"]}),(0,p.jsxs)("select",{value:J.contactMethod,onChange:a=>K({...J,contactMethod:a.target.value}),className:"w-full md:w-[35%] p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50 text-gray-700 font-medium",children:[(0,p.jsx)("option",{value:"",children:"Select..."}),(0,p.jsx)("option",{value:"WhatsApp",children:"WhatsApp"}),(0,p.jsx)("option",{value:"LINE",children:"LINE"}),(0,p.jsx)("option",{value:"WeChat",children:"WeChat"}),(0,p.jsx)("option",{value:"KakaoTalk",children:"KakaoTalk"})]}),J.contactMethod&&(0,p.jsx)("input",{type:"text",value:J.contactId,onChange:a=>K({...J,contactId:a.target.value}),className:"mt-2 w-full md:w-[65%] p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-white",placeholder:"ID / Phone"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Nationality ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{type:"text",value:J.nationality,onChange:a=>K({...J,nationality:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",placeholder:"USA"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Spoken Language ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{type:"text",value:J.spokenLanguage,onChange:a=>K({...J,spokenLanguage:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",placeholder:"English"})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Preferred Date ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsx)("input",{type:"date",value:J.preferredDate||"",onChange:a=>K({...J,preferredDate:a.target.value}),disabled:!!J.preferredDateFlex,className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-xs md:text-sm bg-white text-gray-700 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),(0,p.jsxs)("label",{className:"mt-2 flex items-center gap-2 cursor-pointer",children:[(0,p.jsx)("input",{type:"checkbox",checked:!!J.preferredDateFlex,onChange:a=>K({...J,preferredDateFlex:a.target.checked,preferredDate:a.target.checked?"":J.preferredDate}),className:"rounded accent-teal-600"}),(0,p.jsx)("span",{className:"text-[11px] text-gray-500",children:"Flexible (no specific date)"})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Main Concern ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,p.jsxs)("select",{value:J.treatmentType,onChange:a=>K({...J,treatmentType:a.target.value}),className:"w-full p-3 rounded-xl border border-gray-200 focus:border-teal-500 outline-none transition text-xs md:text-sm bg-white text-gray-700",children:[(0,p.jsx)("option",{value:"",children:"Select..."}),(0,p.jsx)("option",{value:"chronic-fatigue-low-immunity",children:"Chronic fatigue / low immunity"}),(0,p.jsx)("option",{value:"digestive-problems",children:"Digestive problems"}),(0,p.jsx)("option",{value:"sleep-disorder-insomnia",children:"Sleep disorder / insomnia"}),(0,p.jsx)("option",{value:"stress-related-symptoms",children:"Stress-related symptoms"}),(0,p.jsx)("option",{value:"hormonal-imbalance",children:"Hormonal imbalance"}),(0,p.jsx)("option",{value:"post-illness-recovery",children:"Post-illness recovery"}),(0,p.jsx)("option",{value:"unexplained-chronic-symptoms",children:"Unexplained chronic symptoms"}),(0,p.jsx)("option",{value:"skin-problem",children:"Skin problem (acne, rash, pigmentation)"}),(0,p.jsx)("option",{value:"pain-management",children:"Pain management (neck, back, joints)"}),(0,p.jsx)("option",{value:"digestive-weight-management",children:"Digestive & weight management"}),(0,p.jsx)("option",{value:"general-health-checkup",children:"General health check-up"}),(0,p.jsx)("option",{value:"dental-problem",children:"Dental problem"}),(0,p.jsx)("option",{value:"vision-eye-problem",children:"Vision or eye problem"}),(0,p.jsx)("option",{value:"cosmetic-aesthetic",children:"Cosmetic / aesthetic concern"}),(0,p.jsx)("option",{value:"abnormal-test-suspected-cancer",children:"Abnormal test result / suspected cancer"}),(0,p.jsx)("option",{value:"other-medical-concern",children:"Other medical concern"})]})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-xs font-bold text-gray-700 mb-1 ml-1",children:["Message ",(0,p.jsx)("span",{className:"text-gray-400 font-normal",children:"(optional, recommended)"})]}),(0,p.jsx)("textarea",{value:J.message,onChange:a=>K({...J,message:a.target.value}),className:"w-full border border-gray-200 p-3 rounded-xl focus:border-teal-500 outline-none transition text-sm bg-gray-50/50",rows:"4",placeholder:"skin-problem"===J.treatmentType?"When did the skin issue start? Which area is affected?":"dental-problem"===J.treatmentType?"Which tooth or area is painful?":"e.g. Back pain for 2 weeks; no prior diagnosis."}),(0,p.jsx)("p",{className:"mt-1 ml-1 text-[11px] text-gray-500 leading-relaxed",children:"skin-problem"===J.treatmentType?(0,p.jsxs)(p.Fragment,{children:[" When did it start?",(0,p.jsx)("br",{})," Which area is affected?"]}):"dental-problem"===J.treatmentType?(0,p.jsxs)(p.Fragment,{children:[" Which tooth or area?",(0,p.jsx)("br",{})," Any pain or sensitivity?"]}):(0,p.jsxs)(p.Fragment,{children:[" What symptom or concern you have",(0,p.jsx)("br",{})," Which body part is affected",(0,p.jsx)("br",{})," Since when (days / weeks / months)",(0,p.jsx)("br",{})," Any previous diagnosis or test results (if any)"]})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{type:"file",id:"fileInput",className:"hidden",onChange:a=>{let b=a.target.files[0];b&&K({...J,file:b})}}),J.file?(0,p.jsxs)("div",{className:"flex items-center justify-between border border-teal-200 bg-teal-50 rounded-xl p-3",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,p.jsx)("div",{className:"bg-teal-100 p-1.5 rounded-lg text-teal-600 shrink-0",children:(0,p.jsx)(B.File,{size:16})}),(0,p.jsx)("span",{className:"text-xs font-bold text-teal-800 truncate",children:J.file.name})]}),(0,p.jsx)("button",{onClick:()=>K({...J,file:null}),className:"p-1 hover:bg-teal-100 rounded-full text-teal-500",children:(0,p.jsx)(C.X,{size:16})})]}):(0,p.jsxs)("div",{onClick:()=>document.getElementById("fileInput").click(),className:"border border-dashed border-gray-300 rounded-xl p-3 text-center hover:bg-gray-50 transition cursor-pointer flex items-center justify-center gap-2",children:[(0,p.jsx)(A.UploadCloud,{className:"text-gray-400",size:18}),(0,p.jsx)("span",{className:"text-xs text-gray-500",children:"Upload photo or medical record (X-ray, test result, diagnosis note if available)"})]})]}),(0,p.jsxs)("div",{className:"flex items-start gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100",children:[(0,p.jsx)("input",{type:"checkbox",id:"privacyForm",checked:J.privacyAgreed,onChange:a=>K({...J,privacyAgreed:a.target.checked}),className:"mt-0.5 h-4 w-4 cursor-pointer accent-teal-600"}),(0,p.jsxs)("label",{htmlFor:"privacyForm",className:"text-[11px] text-gray-500 cursor-pointer select-none leading-snug",children:["I agree to the ",(0,p.jsx)("span",{onClick:a=>{a.preventDefault(),o("privacy")},className:"text-teal-600 font-bold hover:underline",children:"Privacy Policy"}),". ",(0,p.jsx)("span",{className:"text-red-500",children:"*"})]})]}),(0,p.jsx)("button",{onClick:M,className:"w-full bg-teal-600 text-white py-4 rounded-xl font-bold hover:bg-teal-700 transition transform active:scale-95 shadow-lg shadow-teal-100 mt-2",children:"Send Inquiry"})]})]}),(0,p.jsx)(F.PolicyModal,{isOpen:"privacy"===n,onClose:()=>o(null),title:"Privacy Policy",content:D.PRIVACY_CONTENT})]})};var cT=a.i(51680);function cU(){let a=(0,r.useRouter)(),[b,c]=(0,q.useState)("select"),[d,e]=(0,q.useState)([]),f=(0,q.useMemo)(()=>b=>{switch(b){case"home":default:a.push("/");break;case"list_treatment":a.push("/treatments");break;case"list_hospital":a.push("/hospitals");break;case"admin":a.push("/admin");break;case"inquiry":a.push("/inquiry");break;case"success":a.push("/success")}},[a]);return(0,q.useEffect)(()=>{let a=!0;return cT.supabaseClient.from("treatments").select("id, name, hospital_id, price_min, hospitals(name)").then(({data:b,error:c})=>{if(a){if(c)return void console.error("[InquiryWrapper] simple list error:",c);b&&e(b.map(a=>({id:a.id,title:a.name,hospitalId:a.hospital_id,hospital:a.hospitals?.name,price:a.price_min?`$${a.price_min}`:""})))}}),()=>{a=!1}},[]),(0,p.jsx)(cS,{setView:f,mode:b,setMode:c,onClose:()=>a.back(),treatments:d})}a.s(["default",()=>cU],25843)}];

//# sourceMappingURL=_07b7e0cf._.js.map